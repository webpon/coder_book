#  mockJS



## ä»€ä¹ˆæ˜¯mockJs

[æ–‡æ¡£](http://mockjs.com/)

ç”Ÿæˆéšæœºæ•°æ®ï¼Œæ‹¦æˆª Ajax è¯·æ±‚ 

## ä¸ºä»€ä¹ˆä½¿ç”¨mockJs

åœ¨å·¥ä½œå¼€å‘ä¸­ï¼Œå¦‚æœåç«¯æ¥å£è¿˜æœªå¼€å‘å®Œæˆï¼Œéš¾é“æˆ‘ä»¬å°±åªèƒ½å†™é™æ€é¡µé¢äº†å—ï¼Ÿæ‰€ä»¥å‰ç«¯ä¸ºäº†ä¸å½±å“å·¥ä½œæ•ˆç‡ï¼Œæˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨æ¨¡æ‹Ÿåç«¯æ¥å£è¿”å›éšæœºæ•°æ®ã€‚

1. é‡‡ç”¨jsonæ•°æ®æ¨¡æ‹Ÿï¼Œç”Ÿæˆæ•°æ®æ¯”è¾ƒç¹çï¼Œä¹Ÿæ¯”è¾ƒæœ‰å±€é™æ€§ï¼Œæ²¡åŠæ³•è¾¾åˆ°å¢åˆ æ”¹æŸ¥
2. é‡‡ç”¨mockJsè¿›è¡Œæ¨¡æ‹Ÿæ•°æ®ï¼Œå¯ä»¥æ¨¡æ‹Ÿå„ç§åœºæ™¯ï¼ˆgetã€postï¼‰ç”Ÿæˆæ¥å£ï¼Œå¹¶ä¸”éšæœºç”Ÿæˆæ‰€éœ€æ•°æ®ï¼Œè¿˜å¯ä»¥å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥ 


## ä½¿ç”¨mockJs

é€šè¿‡vue-cliåˆ›å»ºåŸºæœ¬é¡¹ç›®

+ åœ¨é¡¹ç›®ä¸­å®‰è£…mock

  ```js
  npm install mockjs
  ```

+ åœ¨é¡¹ç›®ä¸­æ–°å»ºmockæ–‡ä»¶

  ```js
  //å¼•å…¥mockæ¨¡å—
  import Mock from 'mockjs';
  ```

+ å°†mockæ–‡ä»¶åœ¨main.jsä¸­å¯¼å…¥

  ```js
  import Vue from 'vue'
  import App from './App.vue'
  import './mock/index.js'
  
  Vue.config.productionTip = false
  
  new Vue({
    render: h => h(App),
  }).$mount('#app')
  ```

##  mockè¯­æ³•

#### ç”Ÿæˆå­—ç¬¦ä¸²

+ ç”ŸæˆæŒ‡å®šæ¬¡æ•°å­—ç¬¦ä¸²

  ```js
  import Mock from 'mockJs'
  const data = Mock.mock({
      "string|4": "å“å‘¦ï¼"
  })
  ```

+ ç”ŸæˆæŒ‡å®šèŒƒå›´é•¿åº¦å­—ç¬¦ä¸²

  ```js
  const data = Mock.mock({
      "string|1-8": "å“å‘¦ï¼"
  })
  ```



#### ç”Ÿæˆæ–‡æœ¬

- ç”Ÿæˆä¸€ä¸ªéšæœºå­—ç¬¦ä¸²

  ```js
  const data = Mock.mock({
      "string": "@cword"
  })
  ```


- ç”ŸæˆæŒ‡å®šé•¿åº¦å’ŒèŒƒå›´

  ```js
  const data = Mock.mock({
      string: "@cword(1)",
      str: '@cword(10,15)'
  })
  ```


#### ç”Ÿæˆæ ‡é¢˜å’Œå¥å­

+ ç”Ÿæˆæ ‡é¢˜å’Œå¥å­

  ```js
  const data = Mock.mock({
      title: "@ctitle",
      sentence: '@csentence'
  })
  ```

+ ç”ŸæˆæŒ‡å®šé•¿åº¦çš„æ ‡é¢˜å’Œå¥å­

  ```js
  const data = Mock.mock({
      title: "@ctitle(8)",
      sentence: '@csentence(50)'
  })
  ```

+ ç”ŸæˆæŒ‡å®šèŒƒå›´çš„

  ```js
  const data = Mock.mock({
      title: "@ctitle(5,8)",
      sentence: '@csentence(50,100)'
  })
  ```


#### ç”Ÿæˆæ®µè½

+ éšæœºç”Ÿæˆæ®µè½

  ```js
  const data = Mock.mock({
      content: '@cparagraph()' 
  })
  ```


#### ç”Ÿæˆæ•°å­—

+ ç”ŸæˆæŒ‡å®šæ•°å­—

  ```js
  const data = Mock.mock({
      "number|80": 1
  })
  ```

+ ç”ŸæˆèŒƒå›´æ•°å­—

  ```js
  const data = Mock.mock({
      "number|1-999": 1
  })
  ```

#### ç”Ÿæˆå¢é‡id

+ éšæœºç”Ÿæˆæ ‡è¯†

  ```js
  const data = Mock.mock({
      id: '@increment()'
  })
  ```

#### ç”Ÿæˆå§“å-åœ°å€-èº«ä»½è¯å·

+ éšæœºç”Ÿæˆå§“å-åœ°å€-èº«ä»½è¯å·

  ```js
  const data = Mock.mock({
      name: '@cname()',
      idCard: '@id()',
      address: '@city(true)'
  })â€‹
  ```


#### éšæœºç”Ÿæˆå›¾ç‰‡

+ ç”Ÿæˆå›¾ç‰‡ï¼š@image("300x250","#ff0000","#fff","gif","å¤å¤")


+ å‚æ•°1ï¼šå›¾ç‰‡å¤§å°

  ```js
  [
      '300x250', '250x250', '240x400', '336x280', 
      '180x150', '720x300', '468x60', '234x60', 
      '88x31', '120x90', '120x60', '120x240', 
      '125x125', '728x90', '160x600', '120x600', 
      '300x600'
  ]
  ```

+ å‚æ•°2ï¼šå›¾ç‰‡èƒŒæ™¯è‰²

+ å‚æ•°3ï¼šå›¾ç‰‡å‰æ™¯è‰²

+ å‚æ•°4ï¼šå›¾ç‰‡æ ¼å¼

+ å‚æ•°5ï¼šå›¾ç‰‡æ–‡å­—

#### ç”Ÿæˆæ—¶é—´

+ @Date
+ ç”ŸæˆæŒ‡å®šæ ¼å¼æ—¶é—´ï¼š@date(yyyy-MM-dd hh:mm:ss)

#### æŒ‡å®šæ•°ç»„è¿”å›çš„æ¡æ•°

+ æŒ‡å®šé•¿åº¦ï¼šâ€˜data|5â€™

+ æŒ‡å®šèŒƒå›´ï¼šâ€˜data|5-10â€™

  ```js
  const data = Mock.mock({
      'list|50-99':[
          {
              name: '@cname()',
              address: '@city(true)',
              id: '@increment()'
          }
      ]
  })
  ```


## mockæ‹¦æˆªè¯·æ±‚

#### å®šä¹‰getè¯·æ±‚

```js
Mock.mock('/api/get/news','get',()=>{
    return {
        status: 200,
        message: 'è·å–æ–°é—»åˆ—è¡¨æ•°æ®æˆåŠŸ'
    }
})
```

#### å®šä¹‰postè¯·æ±‚

```js
Mock.mock('/api/post/news','post',()=>{
    return {
        status: 200,
        message: 'æ·»åŠ æ–°é—»åˆ—è¡¨æ•°æ®æˆåŠŸ'
    }
})
```

#### å®ç°æ–°é—»ç®¡ç†æ¡ˆä¾‹

#### å®šä¹‰è·å–æ•°æ®çš„æ¥å£

```js
const data = Mock.mock({
    'newsList|50-70': [
        {
            id: '@increment()',
            title: '@ctitle(10,15)',
            content: '@cparagraph(5,15)',
            img_url: '@image("100x100","#FFE4B5","#fff","æš‚æ— å›¾ç‰‡")',
            add_time: '@date(yyyy-MM-dd hh:mm:ss)'
        }
    ]
})

// å®šä¹‰è·å–æ–°é—»åˆ—è¡¨çš„æ¥å£
Mock.mock('/api/get/news','get',() => {
    const {newsList} = data
    return {
        status: 200,
        message: 'è·å–æ–°é—»åˆ—è¡¨æˆåŠŸ',
        list: data,
        total: newsList.length
    }
})
```

#### å®šä¹‰åˆ†é¡µåŠŸèƒ½

```js
const data = Mock.mock({
    'newsList|50-70': [
        {
            id: '@increment()',
            title: '@ctitle(10,15)',
            content: '@cparagraph(5,15)',
            img_url: '@image("100x100","#FFE4B5","#fff","æš‚æ— å›¾ç‰‡")',
            add_time: '@date(yyyy-MM-dd hh:mm:ss)'
        }
    ]
})

// è·å–å‚æ•°
const getSearchUrl =  (url,name) => {
    const index = url.indexOf('?')
    if(index>-1){
        const searchStr = url.substr(index+1)
        const searchArr = searchStr.split('&')
        for(var i=0;i<searchArr.length;i++){
            const itemArr = searchArr[i].split('=')
            console.log(name,itemArr[0])
            if(name === itemArr[0]){
                return itemArr[1]
            }
        }
    }
}
// å®šä¹‰è·å–æ–°é—»åˆ—è¡¨çš„æ¥å£
Mock.mock(/\/api\/get\/news/,'get',(options) => {
  // è·å–é¡µç 
  const pageindex = getUrlQuery(options.url,'pageindex')
  // è·å–æ¯é¡µæ¡æ•°
  const pagesize = getUrlQuery(options.url,'pagesize')
  // æ•°æ®æ€»æ¡æ•°
  const total = data.list.length
  // æ•°æ®æ€»é¡µæ•°
  const totalPage = Math.ceil(total/pagesize)
  // æˆªå–çš„å¼€å§‹ä½ç½®
  const start = (pageindex - 1)*pagesize
  // æˆªå–çš„ç»“æŸä½ç½®
  const end = pageindex*pagesize
  // æ•°æ®æˆªå–
  const list = pageindex<=totalPage?data.list.slice(start,end):[]
  return {
    status: 200,
    message: 'è·å–æ–°é—»åˆ—è¡¨æˆåŠŸ',
    list: list,
    total: total
  }
})
```

#### å®ç°æ·»åŠ çš„æ¥å£

```js
// æ·»åŠ æ–°é—»
Mock.mock('/api/add/news','post',(options) => {
    const body = JSON.parse(options.body)
    const {newsList} = data
    newsList.unshift(Mock.mock({
        id: '@increment()',
        title: body.title,
        content: body.content,
        img_url: '@image("100x100","#FFE4B5","#fff","æš‚æ— å›¾ç‰‡")',
        add_time: '@date(yyyy-MM-dd hh:mm:ss)'
    }))
    return {
        status: 200,
        message: 'æ·»åŠ æˆåŠŸ',
        list: newsList
    }
})
```

#### å®ç°åˆ é™¤

```js
// åˆ é™¤æ¥å£
Mock.mock('/api/delete/news','post',(options)=>{
    var body = JSON.parse(options.body)
    const {newsList} = data
    const index = newsList.findIndex(item=>{
        return item.id === body.id
    })
    newsList.splice(index,1)
    return {
        status: 200,
        message: 'åˆ é™¤æˆåŠŸ',
        list: newsList
    }
})
```





# NodeJs

## NodeJSç®€ä»‹

## NodeJSç¯å¢ƒé…ç½®

**1ã€ç¯å¢ƒé…ç½®ï¼ˆnodejsæ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ï¼ˆpc)çš„javascriptçš„æµè§ˆå™¨å¼•æ“çš„ç¯å¢ƒï¼‰**

ã€€ã€€**Node.js å®‰è£…é…ç½®**

Node.js å®‰è£…åŒ…åŠæºç ä¸‹è½½åœ°å€ä¸ºï¼šhttps://nodejs.org/en/download/ã€‚

![nodejs_download](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220317.jpeg)

ä½ å¯ä»¥æ ¹æ®ä¸åŒå¹³å°ç³»ç»Ÿé€‰æ‹©ä½ éœ€è¦çš„ Node.js å®‰è£…åŒ…ã€‚

Node.js å†å²ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/dist/

**æ³¨æ„ï¼š**Linux ä¸Šå®‰è£… Node.js éœ€è¦å®‰è£… Python 2.6 æˆ– 2.7 ï¼Œä¸å»ºè®®å®‰è£… Python 3.0 ä»¥ä¸Šç‰ˆæœ¬ã€‚

------

**Windows ä¸Šå®‰è£… Node.js**

ä½ å¯ä»¥é‡‡ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥å®‰è£…ã€‚

**1ã€Windows å®‰è£…åŒ…(.msi)**

![img](https://www.runoob.com/wp-content/uploads/2014/03/4530AA77-2208-47FA-A900-91C93AEC95AF.jpg)

æœ¬æ–‡å®ä¾‹ä»¥ v0.10.26 ç‰ˆæœ¬ä¸ºä¾‹ï¼Œå…¶ä»–ç‰ˆæœ¬ç±»ä¼¼ï¼Œ å®‰è£…æ­¥éª¤ï¼š

æ­¥éª¤ 1 : åŒå‡»ä¸‹è½½åçš„å®‰è£…åŒ… **v0.10.26**ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![install-node-msi-version-on-windows-step1](https://www.runoob.com/wp-content/uploads/2014/03/install-node-msi-version-on-windows-step1.png)

æ­¥éª¤ 2 : ç‚¹å‡»ä»¥ä¸Šçš„Run(è¿è¡Œ)ï¼Œå°†å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼š

![install-node-msi-version-on-windows-step2](https://www.runoob.com/wp-content/uploads/2014/03/install-node-msi-version-on-windows-step2.png)

æ­¥éª¤ 3 : å‹¾é€‰æ¥å—åè®®é€‰é¡¹ï¼Œç‚¹å‡» nextï¼ˆä¸‹ä¸€æ­¥ï¼‰ æŒ‰é’® :

![install-node-msi-version-on-windows-step3](https://www.runoob.com/wp-content/uploads/2014/03/install-node-msi-version-on-windows-step3.png)

æ­¥éª¤ 4 : Node.jsé»˜è®¤å®‰è£…ç›®å½•ä¸º "C:\Program Files\nodejs\" , ä½ å¯ä»¥ä¿®æ”¹ç›®å½•ï¼Œå¹¶ç‚¹å‡» nextï¼ˆä¸‹ä¸€æ­¥ï¼‰ï¼š

![install-node-msi-version-on-windows-step4](https://www.runoob.com/wp-content/uploads/2014/03/install-node-msi-version-on-windows-step4.png)

æ­¥éª¤ 5 : ç‚¹å‡»æ ‘å½¢å›¾æ ‡æ¥é€‰æ‹©ä½ éœ€è¦çš„å®‰è£…æ¨¡å¼ , ç„¶åç‚¹å‡»ä¸‹ä¸€æ­¥ nextï¼ˆä¸‹ä¸€æ­¥ï¼‰

![install-node-msi-version-on-windows-step5](https://www.runoob.com/wp-content/uploads/2014/03/install-node-msi-version-on-windows-step5.png)

æ­¥éª¤ 6 :ç‚¹å‡» Installï¼ˆå®‰è£…ï¼‰ å¼€å§‹å®‰è£…Node.jsã€‚ä½ ä¹Ÿå¯ä»¥ç‚¹å‡» Backï¼ˆè¿”å›ï¼‰æ¥ä¿®æ”¹å…ˆå‰çš„é…ç½®ã€‚ ç„¶åå¹¶ç‚¹å‡» nextï¼ˆä¸‹ä¸€æ­¥ï¼‰ï¼š

![install-node-msi-version-on-windows-step6](https://www.runoob.com/wp-content/uploads/2014/03/install-node-msi-version-on-windows-step6.png)

å®‰è£…è¿‡ç¨‹ï¼š

![install-node-msi-version-on-windows-step7](https://www.runoob.com/wp-content/uploads/2014/03/install-node-msi-version-on-windows-step7.png)

ç‚¹å‡» Finishï¼ˆå®Œæˆï¼‰æŒ‰é’®é€€å‡ºå®‰è£…å‘å¯¼ã€‚

![install-node-msi-version-on-windows-step8](https://www.runoob.com/wp-content/uploads/2014/03/install-node-msi-version-on-windows-step8.png)

æ£€æµ‹PATHç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®äº†Node.jsï¼Œç‚¹å‡»å¼€å§‹=ã€‹è¿è¡Œ=ã€‹è¾“å…¥"cmd" => è¾“å…¥å‘½ä»¤"path"ï¼Œè¾“å‡ºå¦‚ä¸‹ç»“æœï¼š

```
PATH=C:\oraclexe\app\oracle\product\10.2.0\server\bin;C:\Windows\system32;
C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;
c:\python32\python;C:\MinGW\bin;C:\Program Files\GTK2-Runtime\lib;
C:\Program Files\MySQL\MySQL Server 5.5\bin;C:\Program Files\nodejs\;
C:\Users\rg\AppData\Roaming\npm
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¯å¢ƒå˜é‡ä¸­å·²ç»åŒ…å«äº†C:\Program Files\nodejs\

æ£€æŸ¥Node.jsç‰ˆæœ¬

![node-version-test](https://www.runoob.com/wp-content/uploads/2014/03/node-version-test.png)

**2ã€Windows äºŒè¿›åˆ¶æ–‡ä»¶ (.exe)å®‰è£…**

32 ä½å®‰è£…åŒ…ä¸‹è½½åœ°å€ : http://nodejs.org/dist/v0.10.26/node.exe

64 ä½å®‰è£…åŒ…ä¸‹è½½åœ°å€ : http://nodejs.org/dist/v0.10.26/x64/node.exe

**å®‰è£…æ­¥éª¤**

æ­¥éª¤ 1 : åŒå‡»ä¸‹è½½çš„å®‰è£…åŒ… Node.exe ï¼Œå°†å‡ºç°å¦‚ä¸‹ç•Œé¢ :

![install-node-exe-on-windows-step1](https://www.runoob.com/wp-content/uploads/2014/03/install-node-exe-on-windows-step1.png)

ç‚¹å‡» Runï¼ˆè¿è¡Œï¼‰æŒ‰é’®å°†å‡ºç°å‘½ä»¤è¡Œçª—å£ï¼š

![install-node-exe-on-windows-step21](https://www.runoob.com/wp-content/uploads/2014/03/install-node-exe-on-windows-step21.png)

**ç‰ˆæœ¬æµ‹è¯•**

è¿›å…¥ node.exe æ‰€åœ¨çš„ç›®å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![node-version](https://www.runoob.com/wp-content/uploads/2014/03/node-version.png)

å¦‚æœä½ è·å¾—ä»¥ä¸Šè¾“å‡ºç»“æœï¼Œè¯´æ˜ä½ å·²ç»æˆåŠŸå®‰è£…äº†Node.jsã€‚

 nodejså®‰è£…ç¨‹åºä¼šè‡ªåŠ¨æŠŠç¯å¢ƒå˜é‡é…ç½®å¥½ï¼Œæ‰€ä»¥å®‰è£…å®Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†

**2ã€æ‰§è¡Œç¨‹åº**

ã€€ã€€ç¼–å†™ä¸€ä¸ªåç¼€ä¸ºjsçš„jsç¨‹åº

ã€€ã€€![img](https://img2020.cnblogs.com/blog/2029744/202009/2029744-20200914141838433-1412243297.png)

 ã€€cmdæˆ–è€…powershellè¿›å…¥åˆ°è¯¥ç¨‹åºç›®å½•

ã€€ã€€![img](https://img2020.cnblogs.com/blog/2029744/202009/2029744-20200914141914472-2034918439.png)

 

 ã€€æ‰§è¡Œè¯¥ç¨‹åº

ã€€ã€€ã€€![img](https://img2020.cnblogs.com/blog/2029744/202009/2029744-20200914141959156-292040916.png)

 

 ã€€å¯ä»¥çœ‹è§ï¼Œå·²ç»æˆåŠŸè¿è¡Œäº†

**3ã€ç¼–è¯‘å™¨ï¼ˆvscodeä¸ºä¾‹ï¼‰æ‰§è¡Œnodejsç¨‹åº**

ã€€ã€€ä¸Šé¢æ‰§è¡Œnodejsç¨‹åºè™½ç„¶å¯ä»¥æˆåŠŸæ‰§è¡Œï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦è¿›å…¥åˆ°nodejsç¨‹åºçš„æ–‡ä»¶ç›®å½•ï¼Œè¿™ä¸€æ­¥æ¯”è¾ƒçƒ¦

ã€€ã€€ä½†æ˜¯åœ¨cmdæˆ–è€…powershellæ‰§è¡Œå´æ²¡æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ³•ï¼Œå¯ä»¥æŠŠå·¥ä½œç›®å½•æ–‡ä»¶ç¼–å†™åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œä½†æ˜¯

ã€€ã€€æœ‰æ—¶å€™å·¥ä½œç›®å½•ä¼šç»å¸¸å˜åŒ–çš„ã€‚

ã€€ã€€ä¸‹é¢ç”¨ç¼–è¯‘å™¨ï¼ˆvscodeï¼‰ç¼–å†™ï¼Œè¿è¡ŒNodejsç¨‹åºå°±éå¸¸æ–¹ä¾¿

ã€€ã€€![img](https://img2020.cnblogs.com/blog/2029744/202009/2029744-20200914142453790-2096783530.png)

 

 ã€€ç›´æ¥ç”¨vscodeä¹Ÿæ˜¯ä¸å¯ä»¥å¤ªæ–¹ä¾¿è¿è¡Œnodejs,è¿˜æ˜¯å¾—ä¾é cmdå’Œpowershell

ã€€ã€€ä¸‹é¢æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€ä¸ªæ’ä»¶Code Runner

ã€€ã€€![img](https://img2020.cnblogs.com/blog/2029744/202009/2029744-20200914142620134-774115228.png)

 

 ã€€å®‰è£…åå°±å¯ä»¥ç›´æ¥è¿è¡Œnodejsç¨‹åºäº†

ã€€ã€€![img](https://img2020.cnblogs.com/blog/2029744/202009/2029744-20200914142749996-753807611.png)

 

 ã€€å®‰è£…è¿™ä¸ªæ’ä»¶åå³é”®é¼ æ ‡å°±å¯ä»¥çœ‹åˆ°å¤šäº†ä¸ªrun codeé€‰é¡¹

ã€€ã€€ç‚¹å‡»è¿™ä¸ªé€‰é¡¹å°±å¯ä»¥ç›´æ¥è¿è¡Œnodejsç¨‹åºäº†

ã€€ã€€![img](https://img2020.cnblogs.com/blog/2029744/202009/2029744-20200914142941021-531676592.png)

## NodeJSåŸºæœ¬ä½¿ç”¨

1ã€**åˆ›å»ºæœåŠ¡å™¨**

```
	//å¼•ç”¨ç³»ç»Ÿæ¨¡å—
     const http = require('http')
     //åˆ›å»ºwebæœåŠ¡å™¨
     const app = http.createServer()
     //å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„æ—¶å€™
     app.on('request', (req, res) => {
       if (req.url == '/index' || req.url == '/') {
         res.end('welcome to index')
         console.log(1)
       } else if (req.url == '/list') {
         res.end('welcome to list')
       }
     })
     //ç›‘å¬3000ç«¯å£
     app.listen(3000)
     console.log('æœåŠ¡å™¨å·²å¯åŠ¨')

```



## åè¯è§£æ

**HTTPçŠ¶æ€ç **

- 200è¯·æ±‚æˆåŠŸ
- 404è¯·æ±‚çš„èµ„æºæ²¡æœ‰è¢«æ‰¾åˆ°
- 500æœåŠ¡å™¨ç«¯é”™è¯¯
- 400å®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯

**å¼€å‘ä¾èµ–ï¼šdevDependencies****

å¼€å‘ç¯å¢ƒä¾èµ–ï¼Œä»…æ¬¡äºdependenciesçš„ä½¿ç”¨é¢‘ç‡ï¼å®ƒçš„å¯¹è±¡å®šä¹‰å’Œdependenciesä¸€æ ·ï¼Œåªä¸è¿‡å®ƒé‡Œé¢çš„åŒ…åªç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œè¿™äº›åŒ…é€šå¸¸æ˜¯å•å…ƒæµ‹è¯•æˆ–è€…æ‰“åŒ…å·¥å…·ç­‰ï¼Œä¾‹å¦‚gulp, grunt, webpack, moca, coffeeç­‰

å®‰è£…å‘½ä»¤ï¼š

```javascript
npm install package-name --save-dev
æˆ–
npm install package-name -D
123
```

**ç”Ÿäº§ä¾èµ–ï¼šdependencies**

åº”ç”¨ä¾èµ–ï¼Œæˆ–è€…å«åšä¸šåŠ¡ä¾èµ–ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ä¾èµ–åŒ…ç®¡ç†å¯¹è±¡ï¼å®ƒç”¨äºæŒ‡å®šåº”ç”¨ä¾èµ–çš„å¤–éƒ¨åŒ…ï¼Œè¿™äº›ä¾èµ–æ˜¯åº”ç”¨å‘å¸ƒåæ­£å¸¸æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„ï¼Œä½†ä¸åŒ…å«æµ‹è¯•æ—¶æˆ–è€…æœ¬åœ°æ‰“åŒ…æ—¶æ‰€ä½¿ç”¨çš„åŒ…ã€‚

å®‰è£…å‘½ä»¤

```javascript
npm install package-name --save
æˆ–
npm install package-name -S
```

### package.jsonæ–‡ä»¶çš„ä½œç”¨

é¡¹ç›®æè¿°æ–‡ä»¶ï¼Œè®°å½•äº†å½“å‰é¡¹ç›®ä¿¡æ¯ï¼Œä¾‹å¦‚é¡¹ç›®ç‰ˆæœ¬ã€ä½œè€…ã€githubåœ°å€ã€å½“å‰é¡¹ç›®ä¾èµ–äº†å“ªäº›ç¬¬ä¸‰æ–¹æ¨¡å—ç­‰ã€‚

ä½¿ç”¨npm init -yå‘½ä»¤ç®€å•ç”Ÿæˆã€‚

### package-lock.jsonçš„ä½œç”¨

1ã€é”å®šå®‰è£…æ—¶çš„åŒ…çš„ç‰ˆæœ¬å·ï¼Œéœ€è¦ä¸Šä¼ åˆ°gitï¼Œä¿è¯å¤§å®¶çš„ä¾èµ–åŒ…ä¸€è‡´ã€‚

â€‹	åŠ å¿«ä¸‹è½½é€Ÿåº¦ï¼Œå› ä¸ºè¯¥æ–‡ä»¶ä¸­å·²ç»è®°å½•äº†é¡¹ç›®æ‰€ä¾èµ–ç¬¬ä¸‰æ–¹åŒ…çš„æ ‘çŠ¶ç»“æ„å’ŒåŒ…çš„ä¸‹è½½åœ°å€ï¼Œé‡æ–°å®‰è£…æ—¶åªéœ€ä¸‹è½½å³å¯ï¼Œä¸éœ€è¦åšé¢å¤–çš„å·¥ä½œ

2ã€package-lock.json æ˜¯åœ¨ `npm install`æ—¶å€™ç”Ÿæˆä¸€ä»½æ–‡ä»¶ï¼Œç”¨æ¥è®°å½•å½“å‰çŠ¶æ€ä¸‹å®é™…å®‰è£…çš„å„ä¸ªnpm packageçš„å…·ä½“æ¥æºå’Œç‰ˆæœ¬å·ã€‚

3ã€å®ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå› ä¸ºnpmæ˜¯ä¸€ä¸ªç”¨äºç®¡ç†packageä¹‹é—´ä¾èµ–å…³ç³»çš„ç®¡ç†å™¨ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨pacakge.jsonä¸­é—´æ ‡å‡ºè‡ªå·±é¡¹ç›®å¯¹npmå„åº“åŒ…çš„ä¾èµ–ã€‚ä½ å¯ä»¥é€‰æ‹©ä»¥å¦‚ä¸‹æ–¹å¼æ¥æ ‡æ˜è‡ªå·±æ‰€éœ€è¦åº“åŒ…çš„ç‰ˆæœ¬ï¼›ä¾‹å¦‚ï¼š

```
     "dependencies": {
      "@types/node": "^8.0.33",
     },
```

ã€€ã€€è¿™é‡Œé¢çš„ å‘ä¸Šæ ‡å·**^**æ˜¯å®šä¹‰äº†**å‘åï¼ˆæ–°ï¼‰å…¼å®¹ä¾èµ–**ï¼ŒæŒ‡å¦‚æœ types/nodeçš„ç‰ˆæœ¬æ˜¯è¶…è¿‡8.0.33ï¼Œå¹¶åœ¨å¤§ç‰ˆæœ¬å·ï¼ˆ8ï¼‰ä¸Šç›¸åŒï¼Œå°±å…è®¸ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ types/nodeåº“åŒ…ï¼Œä¾‹å¦‚å®é™…ä¸Šå¯èƒ½è¿è¡Œnpm installæ—¶å€™ä¸‹è½½çš„å…·ä½“ç‰ˆæœ¬æ˜¯8.0.35ã€‚

ã€€ã€€å¤§å¤šæ•°æƒ…å†µè¿™ç§å‘æ–°å…¼å®¹ä¾èµ–ä¸‹è½½æœ€æ–°åº“åŒ…çš„æ—¶å€™éƒ½æ²¡æœ‰é—®é¢˜ï¼Œå¯æ˜¯å› ä¸ºnpmæ˜¯å¼€æºä¸–ç•Œï¼Œå„åº“åŒ…çš„ç‰ˆæœ¬è¯­ä¹‰å¯èƒ½å¹¶ä¸ç›¸åŒï¼Œæœ‰çš„åº“åŒ…å¼€å‘è€…å¹¶ä¸éµå®ˆä¸¥æ ¼è¿™ä¸€åŸåˆ™ï¼šç›¸åŒå¤§ç‰ˆæœ¬å·çš„åŒä¸€ä¸ªåº“åŒ…ï¼Œå…¶æ¥å£ç¬¦åˆå…¼å®¹è¦æ±‚ã€‚è¿™æ—¶å€™ç”¨æˆ·å°±å¾ˆå¤´ç–¼äº†ï¼šåœ¨å®Œå…¨ç›¸åŒçš„ä¸€ä¸ªnodejsçš„ä»£ç åº“ï¼Œåœ¨ä¸åŒæ—¶é—´æˆ–è€…ä¸åŒnpmä¸‹è½½æºä¹‹ä¸‹ï¼Œä¸‹åˆ°çš„å„ä¾èµ–åº“åŒ…ç‰ˆæœ¬å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œå› æ­¤å…¶ä¾èµ–åº“åŒ…è¡Œä¸ºç‰¹å¾ä¹Ÿä¸åŒæœ‰æ—¶å€™ç”šè‡³å®Œå…¨ä¸å…¼å®¹ã€‚

è§£å†³ï¼š

ã€€ã€€å› æ­¤npmæœ€æ–°çš„ç‰ˆæœ¬å°±å¼€å§‹æä¾›è‡ªåŠ¨ç”Ÿæˆpackage-lock.jsonåŠŸèƒ½ï¼Œä¸ºçš„æ˜¯è®©å¼€å‘è€…çŸ¥é“åªè¦ä½ ä¿å­˜äº†æºæ–‡ä»¶ï¼Œåˆ°ä¸€ä¸ªæ–°çš„æœºå™¨ä¸Šã€æˆ–è€…æ–°çš„ä¸‹è½½æºï¼Œåªè¦æŒ‰ç…§è¿™ä¸ªpackage-lock.jsonæ‰€æ ‡ç¤ºçš„å…·ä½“ç‰ˆæœ¬ä¸‹è½½ä¾èµ–åº“åŒ…ï¼Œå°±èƒ½ç¡®ä¿æ‰€æœ‰åº“åŒ…ä¸ä½ ä¸Šæ¬¡å®‰è£…çš„å®Œå…¨ä¸€æ ·ã€‚

4ã€package.jsonç¼ºç‚¹

ã€€ã€€åŸæ¥package.jsonæ–‡ä»¶åªèƒ½é”å®šå¤§ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ç‰ˆæœ¬å·çš„ç¬¬ä¸€ä½ï¼Œå¹¶ä¸èƒ½é”å®šåé¢çš„å°ç‰ˆæœ¬ï¼Œä½ æ¯æ¬¡npm installéƒ½æ˜¯æ‹‰å–çš„è¯¥å¤§ç‰ˆæœ¬ä¸‹çš„æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¸ºäº†ç¨³å®šæ€§è€ƒè™‘æˆ‘ä»¬å‡ ä¹æ˜¯ä¸æ•¢éšæ„å‡çº§ä¾èµ–åŒ…çš„ï¼Œè¿™å°†å¯¼è‡´å¤šå‡ºæ¥å¾ˆå¤šå·¥ä½œé‡ï¼Œæµ‹è¯•/é€‚é…ç­‰ï¼Œæ‰€ä»¥package-lock.jsonæ–‡ä»¶å‡ºæ¥äº†ï¼Œå½“ä½ æ¯æ¬¡å®‰è£…ä¸€ä¸ªä¾èµ–çš„æ—¶å€™å°±é”å®šåœ¨ä½ å®‰è£…çš„è¿™ä¸ªç‰ˆæœ¬ã€‚

5ã€å®‰è£…ä¾èµ–å‡ºé—®é¢˜çš„è§£å†³æ–¹å¼ä¸åŒï¼š

ã€€ã€€é‚£å¦‚æœæˆ‘ä»¬å®‰è£…æ—¶çš„åŒ…æœ‰bugï¼Œåé¢éœ€è¦æ›´æ–°æ€ä¹ˆåŠï¼Ÿ

ä»¥å‰ï¼šåœ¨ä»¥å‰å¯èƒ½å°±æ˜¯ç›´æ¥æ”¹package.jsoné‡Œé¢çš„ç‰ˆæœ¬ï¼Œç„¶åå†npm installäº†ã€‚

ç°åœ¨ï¼šä½†æ˜¯5ç‰ˆæœ¬åå°±ä¸æ”¯æŒè¿™æ ·åšäº†ï¼Œå› ä¸ºç‰ˆæœ¬å·²ç»é”å®šåœ¨package-lock.jsoné‡Œäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½npm install xxx@x.x.x  è¿™æ ·å»æ›´æ–°æˆ‘ä»¬çš„ä¾èµ–ï¼Œç„¶åpackage-lock.jsonä¹Ÿèƒ½éšä¹‹æ›´æ–°ã€‚

ä¾‹å¦‚ï¼š

å‡å¦‚æˆ‘å·²ç»å®‰è£…äº†jquery 2.1.4è¿™ä¸ªç‰ˆæœ¬ï¼Œä»gitæ›´æ–°äº†package.jsonå’Œpackage-lock.jsonï¼Œæˆ‘npm installèƒ½è¦†ç›–æ‰node_modulesé‡Œé¢çš„ä¾èµ–å—?

å…¶å®æˆ‘ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼Œæ‰€ä»¥åšäº†æµ‹è¯•ï¼Œåœ¨ç›´æ¥æ›´æ–°package.jsonå’Œpackage-loc.jsonè¿™ä¸¤ä¸ªæ–‡ä»¶åï¼Œnpm installæ˜¯å¯ä»¥ç›´æ¥è¦†ç›–æ‰åŸå…ˆçš„ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥åœ¨åä½œå¼€å‘æ—¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶å¦‚æœæœ‰æ›´æ–°ï¼Œä½ çš„å¼€å‘ç¯å¢ƒåº”è¯¥npm installä¸€ä¸‹æ‰å¯¹ã€‚

## npm 

### npmç®€ä»‹

#### **npmæ˜¯ä»€ä¹ˆ**

Npm(Node Package Manager) æ˜¯nodeçš„åŒ…ç®¡ç†å·¥å…·ï¼Œæ˜¯ç”¨JavaScriptå†™å‡ºæ¥çš„å·¥å…· ï¼Œè¢«å†…ç½®è¿›äº†nodeä¸­

#### npmçš„ç»„æˆ

| ç»„æˆ               | ç®€ä»‹                                                         |
| ------------------ | ------------------------------------------------------------ |
| ç½‘ç«™               | ç½‘ç«™ æ˜¯å¼€å‘è€…æŸ¥æ‰¾åŒ…ï¼ˆpackageï¼‰ã€è®¾ç½®å‚æ•°ä»¥åŠç®¡ç† npm ä½¿ç”¨ä½“éªŒçš„ä¸»è¦é€”å¾„ |
| æ³¨å†Œè¡¨ï¼ˆregistryï¼‰ | æ³¨å†Œè¡¨ æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ•°æ®åº“ï¼Œä¿å­˜äº†æ¯ä¸ªåŒ…ï¼ˆpackageï¼‰çš„ä¿¡æ¯     |
| å‘½ä»¤è¡Œå·¥å…· (CLI)   | CLI é€šè¿‡å‘½ä»¤è¡Œæˆ–ç»ˆç«¯è¿è¡Œã€‚å¼€å‘è€…é€šè¿‡ CLI ä¸ npm æ‰“äº¤é“       |
| npmæœåŠ¡å™¨          | ç”¨äºå­˜å‚¨æ‰€æœ‰çš„npmåŒ…                                          |

#### npmæœ‰ä»€ä¹ˆç”¨

- å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨
- å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨
- å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°NPMæœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨

#### Node.js å®‰è£…é…ç½®é“¾æ¥ï¼ˆNode.jsä¸­å†…ç½®æœ‰npmï¼‰

https://jingyan.baidu.com/article/c85b7a64b6498c003aac956a.html

#### npmä¸­æ–‡æ–‡æ¡£

https://www.npmjs.com/ å®˜ç½‘
https://www.npmjs.com.cn/ ä¸­æ–‡æ–‡æ¡£

#### æ£€æµ‹æ˜¯å¦æˆåŠŸå®‰è£…npm

```
npm -v		
6.4.1		//å®‰è£…æˆåŠŸä¼šè¿”å›è¿™ä¸ªç‰ˆæœ¬å·
```

### npmåŸºæœ¬ä½¿ç”¨

**npmå®‰è£…æ¨¡å—**

ã€**npm install** xxxã€‘åˆ©ç”¨ npm å®‰è£…xxxæ¨¡å—åˆ°å½“å‰å‘½ä»¤è¡Œæ‰€åœ¨ç›®å½•ï¼›
	  ã€**npm install** -g xxxã€‘åˆ©ç”¨npmå®‰è£…å…¨å±€æ¨¡å—xxxï¼›

 

**æœ¬åœ°å®‰è£…æ—¶å°†æ¨¡å—å†™å…¥package.jsonä¸­ï¼š**

ã€**npm install** xxxã€‘å®‰è£…ä½†ä¸å†™å…¥package.jsonï¼›
      ã€**npm install** xxx --saveã€‘ å®‰è£…å¹¶å†™å…¥package.jsonçš„"dependencies"ä¸­ï¼›
	  ã€**npm install** xxx --save-devã€‘å®‰è£…å¹¶å†™å…¥package.jsonçš„"devDependencies"ä¸­ã€‚

 

**npm åˆ é™¤æ¨¡å—**

ã€**npm uninstall** xxxã€‘åˆ é™¤xxxæ¨¡å—ï¼›
      **ã€npm uninstall -g xxxã€‘åˆ é™¤å…¨å±€æ¨¡å—xxxï¼›**

**å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…**

npm çš„åŒ…å®‰è£…åˆ†ä¸ºæœ¬åœ°å®‰è£…ï¼ˆlocalï¼‰ï¼Œå…¨å±€å®‰è£…ï¼ˆglobalï¼‰ä¸¤ç§ï¼Œä»æ•²çš„å‘½ä»¤è¡Œæ¥çœ‹ï¼Œå·®åˆ«åªæ˜¯æœ‰æ²¡æœ‰-gè€Œå·²ï¼Œæ¯”å¦‚

```
	npm install <Module Name>         # æœ¬åœ°å®‰è£…
     npm install <Module Name> -g      # å…¨å±€å®‰è£…
     // installå¯ä»¥ç¼©å†™ä¸ºi
```

`npm install` å¯ä»¥æŠŠå‘å¸ƒåœ¨ npmjs å¹³å°ä¸Šçš„æ¨¡å—åŒ…ä¸‹è½½åˆ°æœ¬åœ°ï¼Œ`npm install -g` å¯ä»¥æŠŠåŒ…ä¸‹ä¸‹æ¥çš„åŒæ—¶ï¼Œè¿˜å¸®æˆ‘ä»¬é…ç½®å¥½å…¨å±€å˜é‡ï¼Œè®©æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤	   è€Œä¸æ˜¯é€šè¿‡ node æ¥æ‰§è¡Œæˆ–è€…é…ç½® `package.json` çš„ script è„šæœ¬æ¥ runã€‚

ä¸å…¨å±€å®‰è£…çš„è¯éœ€è¦åœ¨è¯¥ä¾èµ–åŒ…ä¸‹é¢æ‰§è¡Œnpm linkæ‰èƒ½åœ¨å‘½ä»¤è¡Œä½¿ç”¨

**npm link**

npm linkå¯ä»¥é…ç½®ä¸€äº›æˆ‘ä»¬çš„ç»ˆç«¯å‘½ä»¤

ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦initä¸€ä¸ªpackage.json

ç„¶ååœ¨package.jsonä¸­åŠ å…¥bin:index.js

![image-20210221131443120](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220351.png)

ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸Šåˆ›å»ºindex.js

è¾“å…¥ä»£ç ï¼š

```
//è¿™è¡Œæ˜¯å¿…é¡»çš„
#!/usr/bin/env node

console.log('æµ‹è¯•');
```

æ‰§è¡Œnpm link

![image-20210221131628465](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220355.png)

è¿™æ ·æˆ‘ä»¬å°±åˆ›å»ºå¥½æˆ‘ä»¬çš„å‘½ä»¤äº†

![image-20210221131655226](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220359.png)

å¦‚æœæƒ³å¸è½½çš„è¯å¯ä»¥ä½¿ç”¨npm unlink

**æŸ¥çœ‹å…¨å±€å®‰è£…çš„ä¾èµ–åŒ…**    npm list -g --depth 0

æŸ¥çœ‹å…¨å±€å®‰è£…ç›®å½• npm config get prefix

#### åˆ‡æ¢npmä¸‹è½½åœ°å€

ç”±äºå›½å†…ç›´æ¥ä½¿ç”¨ npm çš„å®˜æ–¹é•œåƒæ˜¯éå¸¸æ…¢çš„ï¼Œè¿™é‡Œæ¨èä½¿ç”¨æ·˜å® NPM é•œåƒã€‚

ä¸€ã€npmåˆ‡æ¢ä¸‹è½½åœ°å€

- ä½¿ç”¨ npm install nrm -g ä¸‹è½½å®ƒ
- æŸ¥è¯¢å¯ç”¨ä¸‹è½½åœ°å€ nrm ls
- åˆ‡æ¢ npm ä¸‹è½½åœ°å€ nrm use ä¸‹è½½åœ°å€åç§°
- nrm testæµ‹è¯•å„æ¥å£ç½‘é€Ÿæƒ…å†µ
- å¢åŠ å®šåˆ¶æºï¼šnrm add test http://192.168.1.100:6666
- åˆ é™¤æºï¼šnrm del test

äºŒã€cnpmå®‰è£…

- å¯ä»¥ä½¿ç”¨æ·˜å®å®šåˆ¶çš„ cnpm (gzip å‹ç¼©æ”¯æŒ) å‘½ä»¤è¡Œå·¥å…·ä»£æ›¿é»˜è®¤çš„ npm:
  `npm install -g cnpm --registry=https://registry.npm.taobao.org`
  è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ cnpm å‘½ä»¤æ¥å®‰è£…æ¨¡å—äº†ï¼š
  `cnpm install [name]`

ä½†æ˜¯æœ‰å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š

![img](https://img2020.cnblogs.com/blog/2029744/202009/2029744-20200909204105073-1282103276.png)

 è§£å†³æ–¹æ³•ï¼šã€€ã€€

1ã€åœ¨ç³»ç»Ÿä¸­æœç´¢æ¡† è¾“å…¥ Windos PowerShell

2ã€ç‚¹å‡»â€œç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€

3ã€è¾“å…¥â€œ set-ExecutionPolicy RemoteSignedâ€å›è½¦

4ã€æ ¹æ®æç¤ºï¼Œè¾“å…¥Aï¼Œå›è½¦

5ã€å†æ¬¡å›åˆ°cnpm -væ‰§è¡ŒæˆåŠŸã€‚

### ä¸Šä¼ è‡ªå·±çš„npmåŒ…

**æ–¹æ³•ä¸€**ï¼ˆæœ€ç®€å•ï¼‰ï¼š

**npmåˆå§‹åŒ–**

```cpp
npm init
```

**ç›®å½•ç»“æ„ï¼š**

![image-20210109102616579](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220405.png)

index.js

```
     module.exports=function(){
          console.log('ä½ å¥½ï¼Œè¿™æ˜¯æˆ‘å‘å¸ƒçš„npmåŒ…')
     }
```

package.json

```
     {
       "name": "webpontest224909",
       "version": "2.0.0",
       "description": "",
       "main": "index.js",
       "scripts": {
         "test": "echo \"Error: no test specified\" && exit 1"
       },
       "author": "",
       "license": "ISC"
     }
```

Terminalæ‰“å°

```cpp
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See `npm help json` for definitive documentation on these fields
and exactly what they do.

Use `npm install <pkg>` afterwards to install a package and
save it as a dependency in the package.json file
Press ^C at any time to quit.
package name: (ng-antd-cli)
version: (1.0.0)
git repository: (https://github.com/*****/ng-antd-cli.git)
author: *****
license: (ISC) MIT
About to write to D:\ng-antd-cli\package.json:
```

**npmç™»é™†**

è‹¥æ˜¯æ²¡æœ‰è´¦å·ï¼Œè¯·å…ˆæ³¨å†Œ https://www.npmjs.com/ï¼Œ

```cpp
npm login
```

Terminalæ‰“å°

å¦‚æœæ›¾ç»è®¾ç½®è¿‡æ·˜å®çš„é•œåƒä»£ç†ï¼Œè¿™é‡Œæ‰“å°çš„å†…å®¹ä¸ºï¼š

```cpp
Username: *****
Password:
Email: (this IS public) *****
Logged in as ***** on https://registry.npm.taobao.org/.
```

å¦‚æœä¹ˆæœ‰è®¾ç½®è¿‡æ·˜å®çš„é•œåƒä»£ç†ï¼Œè¿™é‡Œæ‰“å°çš„å†…å®¹ä¸ºï¼š

```cpp
Username: *****
Password:
Email: (this IS public) *****
Logged in as ***** on http://registry.npmjs.org/.
```

**npmå‘å¸ƒ**

```cpp
npm publish
```

Terminalæ‰“å°

```cpp
npm notice
npm notice package: ng-antd-cli@1.0.0
npm notice === Tarball Contents ===
npm notice 246B  .editorconfig
npm notice 2.3kB index.js
npm notice 810B  package.json
npm notice 214B  README.md
npm notice === Tarball Details ===
npm notice name:          ng-antd-cli
npm notice version:       1.0.0
npm notice package size:  1.6 kB
npm notice unpacked size: 3.5 kB
npm notice shasum:        17453c1827a98e3aba1128ab92275b9ca1bb57e4
npm notice integrity:     sha512-e9gJf/qOqzABo[...]8imC9iepBwrmA==
npm notice total files:   4
npm notice
npm ERR! code E403
npm ERR! 403 403 Forbidden - PUT https://registry.npm.taobao.org/ng-antd-cli - [no_perms] Private mode enable, only admin can publish
 this module
npm ERR! 403 In most cases, you or one of your dependencies are requesting
npm ERR! 403 a package version that is forbidden by your security policy.
```

`æŠ¥é”™ï¼Œè¿™é‡ŒæŠ¥é”™æ˜¯è¯´æ²¡æœ‰æƒé™ï¼Œè¿™é‡Œå°±ä¸ä¹‹å‰æ˜¯å¦è®¾ç½®è¿‡æ·˜å®é•œåƒæœ‰å…³ç³»ï¼Œå¦‚æœç™»é™†çš„æ˜¯æ·˜å®é•œåƒï¼Œè¿™é‡Œå°±ä¼šæŠ¥é”™`
`ï¼ˆå› ä¸ºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œå¾ˆå¤šäººæŠŠnpmçš„é•œåƒä»£ç†åˆ°æ·˜å®æˆ–è€…åˆ«çš„åœ°æ–¹äº†ï¼Œè¿™é‡Œè¦è®¾ç½®å›åŸå§‹çš„é•œåƒï¼‰`

> è®¾ç½®npmçš„é•œåƒåœ°å€

```
åŸå§‹åœ°å€
npm config set registry=http://registry.npmjs.org
```

å†æ¬¡å‘å¸ƒ

```cpp
npm publish
```

å‘å¸ƒæˆåŠŸï¼š

```cpp
npm notice
npm notice 810B  package.json
npm notice 214B  README.md
npm notice === Tarball Details ===
npm notice name:          ng-antd-cli
npm notice version:       1.0.0
npm notice package size:  1.6 kB
npm notice unpacked size: 3.5 kB
npm notice shasum:        17453c1827a98e3aba1128ab92275b9ca1bb57e4
npm notice integrity:     sha512-e9gJf/qOqzABo[...]8imC9iepBwrmA==
npm notice total files:   4
npm notice
+ ng-antd-cli@1.0.0
```

å¯ä»¥åˆ°npmç½‘é¡µæŸ¥çœ‹å‘å¸ƒçš„åŒ…

**åˆ é™¤å‘å¸ƒçš„åŒ…**

åˆ é™¤24å°æ—¶å†…å‘å¸ƒçš„åŒ…

```cpp
npm unpublish --force 
```

åˆ é™¤æŒ‡å®šåç§°çš„åŒ…

```cpp
npx force-unpublish package-name 'åˆ é™¤åŸå› ' //
```

Terminalæ‰“å°

```cpp
ğŸ”¥ Unpublishing antd-ng-li...
+ npm (antd-ng-li)
npm ERR! owner mutate Error getting user data for $(npm
npm ERR! code E404
npm ERR! 404 Not Found - GET http://registry.npmjs.org/-/user/org.couchdb.user:%24(npm
ğŸ‰ Done.

D:\HC\webstorm\ng-antd-cli>
```

åˆ°ç½‘é¡µæŸ¥çœ‹ä»å¯ä»¥çœ‹åˆ°è¯¥åŒ…åï¼Œä½†æ˜¯ç‚¹å‡»åäº§çœ‹å¯ä»¥çœ‹åˆ°å·²åˆ é™¤ä¿¡æ¯
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20191122163032514.png)
å‘å¸ƒæˆåŠŸåï¼Œä¸ºäº†ä¹‹åä½¿ç”¨æ–¹ä¾¿å¯ä»¥ç»§ç»­è®¾ç½®npmä»£ç†é•œåƒ

```cpp
npm config set registry=https://registry.npm.taobao.org
```

npm**æ›´æ–°**

æ‰€è°“çš„æ›´æ–°ï¼Œå…¶å®å°±æ˜¯å†æ¬¡å‘å¸ƒ

```cpp
npm publish
```

Terminalæ‰“å°

æŠ¥é”™ä¿¡æ¯

```cpp
npm ERR! code E403
npm ERR! 403 403 Forbidden - PUT http://registry.npmjs.org/xxx-xxx - 
You cannot publish over the previously published versions: 2.0.0.
npm ERR! 403 In most cases, you or one of your dependencies are requesting
npm ERR! 403 a package version that is forbidden by your security policy
```

æ¯æ¬¡æ›´æ–°çš„æ—¶å€™éœ€è¦æ”¹å˜package.jsonä¸­çš„ç‰ˆæœ¬å·
é‡æ–°å‘å¸ƒï¼ŒOKäº†

`ä¸Šä¼ npm,npmä¼šæŠŠåŒ…è¿›è¡Œå¤„ç†ï¼Œæˆ‘ä»¬ä¸‹è½½åä¼šå˜å¾—ä¸ä¸€æ ·`

ä¸Šä¼ ä¹‹å‰ï¼š

![image-20210301014716717](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210301014716.png)

package.json:

![image-20210301014734016](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210301014734.png)

ä¸Šä¼ ä¸‹è½½å

![image-20210301034240539](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210301034240.png)

package.json:

![image-20210301034310175](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210301034310.png)

ä¸¤è€…åŒºåˆ«ï¼šä¸Šä¼ ä¸‹è½½ånpmä¼šæŠŠpackage.jsonä¸­çš„binå‘½ä»¤ç”Ÿæˆå¯æ‰§è¡Œå‘½ä»¤æ”¾åœ¨.binä¸­ï¼Œ

æˆ‘ä»¬å¯ä»¥é€šè¿‡./node_modules/.bin/è„šæœ¬åï¼Œ

æˆ–è€…é€šè¿‡node ./node_modules/åŒ…å/bin/è„šæœ¬ æ‰§è¡Œï¼Œ

è¿˜æœ‰å°±æ˜¯é€šè¿‡æˆ‘ä»¬è®¾å®šçš„å‘½ä»¤è„šæœ¬scriptæ‰§è¡Œï¼Œ

è¿™ä¸ªscriptä¼šå».node_modules/.binæˆ–è€…åˆ°å…¨å±€å®‰è£…ç›®å½•å»æ‰¾æ‰¾åˆ°è¯¥å¯æ‰§è¡Œè„šæœ¬æ‰§è¡Œï¼Œä½†æ˜¯éƒ½`æ¯”è¾ƒéº»çƒ¦`ï¼Œ

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨npx testbinæ¥æ‰§è¡Œï¼Œå®ƒç›¸å½“äºnpm run test



å¦‚æœå…¨å±€å®‰è£…ï¼Œé‚£ä¹ˆå¯æ‰§è¡Œå‘½ä»¤ä¹Ÿä¼šæ”¾åˆ°npmå…¨å±€å®‰è£…ç›®å½•ï¼Œè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤testbinï¼Œé‚£ä¹ˆå°±ä¼šå»npmå…¨å±€å®‰è£…ç›®å½•å»å¯»æ‰¾è¯¥å¯æ‰§è¡Œå‘½ä»¤



### Nodejsæ¨¡å—åŠ è½½æœºåˆ¶

**1) æ¨¡å—çš„ç±»å‹**`ï¼ˆæœ€ä¼˜å…ˆï¼‰`

NodeJSæ¨¡å—åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯æ ¸å¿ƒæ¨¡å—ï¼Œä¸€ç±»æ˜¯æ–‡ä»¶æ¨¡å—ã€‚

1ï¼Œæ ¸å¿ƒæ¨¡å—å°±æ˜¯NodeJSæ ‡å‡†ä¸­æä¾›çš„æ¨¡å—ï¼Œå¦‚fsã€httpã€netã€vmç­‰ï¼Œå®˜æ–¹æä¾›çš„æ¨¡å—ï¼Œç¼–è¯‘æˆäº†äºŒè¿›åˆ¶ä»£ç ï¼Œç›´æ¥å¯ä»¥é€šè¿‡requireè·å–æ ¸å¿ƒæ¨¡å—ï¼Œæ ¸å¿ƒæ¨¡å—å…·æœ‰æœ€é«˜çš„åŠ è½½ä¼˜å…ˆçº§ï¼Œå¦‚æœæœ‰æ¨¡å—å’Œå…¶å‘½åå†²çªï¼ŒnodeJSæ€»ä¼šåŠ è½½æ ¸å¿ƒæ¨¡å—

2ï¼Œæ–‡ä»¶æ¨¡å—åˆ™æ˜¯å­˜å‚¨ä¸ºå•ç‹¬çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„æ¨¡å—ï¼Œå¯èƒ½æ˜¯JSä»£ç ã€JSONæˆ–ç¼–è¯‘å¥½çš„C/C++ä»£ç ã€‚åœ¨ä¸æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ¨¡å—æ‰©å±•åçš„æ—¶å€™ï¼ŒNodeJSä¼šåˆ†åˆ«è¯•å›¾åŠ ä¸Š.jsã€.jsonå’Œ.nodeæ‰©å±•å

**2)æ–‡ä»¶æ¨¡å—åŠ è½½æ–¹å¼**

æ–‡ä»¶æ¨¡å—çš„åŠ è½½æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯æŒ‰è·¯å¾„åŠ è½½ï¼Œä¸€ç§æ˜¯æŸ¥æ‰¾nodeâ€”â€”modulesæ–‡ä»¶å¤¹

**A:æŒ‰è·¯å¾„åŠ è½½æ¨¡å—**

1ï¼Œå¦‚æœrequireå‚æ•°ä»¥â€œ/"å¼€å¤´ï¼Œé‚£ä¹ˆå°±ä»¥ç»å¯¹è·¯å¾„çš„æ–¹å¼æŸ¥æ‰¾æ¨¡å—åç§°ï¼Œä¾‹å¦‚requireï¼ˆâ€˜/home/byvoid/moduleâ€™)å°†ä¼šæŒ‰ç…§ä¼˜å…ˆçº§ä¾æ¬¡å°è¯•åŠ è½½/home/byvoid/module.jsã€/home/byvoid/module.jsonã€/home/byvoid/module.node(æ‰€æœ‰æ— åç¼€çš„æ¨¡å—åŠ è½½æ–¹å¼éƒ½æ˜¯æŒ‰ç…§js/json/nodeçš„é¡ºåºï¼‰

2ï¼Œå¦‚æœrequireå‚æ•°ä»¥â€˜./â€™æˆ–è€…'../'å¼€å¤´ï¼Œåˆ™ä»¥ç›¸å¯¹è·¯å¾„æ¥æŸ¥æ‰¾æ¨¡å—

3ã€æ–‡ä»¶å¤¹åŒ…å«ï¼Œé€šè¿‡npmå®‰è£…çš„ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½æ˜¯è¿™ç§æ–¹å¼ï¼ŒæŒ‡å®šåˆ°æ¨¡å—æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹å°±æ˜¯æ¨¡å—åï¼Œä»¥expressä¸ºä¾‹ï¼š

<img src="https://images0.cnblogs.com/blog2015/511490/201505/031742515993561.png" alt="img" style="zoom:80%;" />

ã€€ã€€ã€€åŠ è½½ä»£ç ï¼švar ex = require('./node_modules/express')

ã€€ã€€ã€€ã€€åŠ è½½æœºåˆ¶ï¼š

â€‹     é¦–å…ˆæœç´¢å½“å‰ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶ï¼ŒæŸ¥æ‰¾é‡Œé¢çš„mianå±æ€§ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™åŠ è½½è¯¥å±æ€§æ‰€æŒ‡å®šçš„çš„æ–‡ä»¶ã€‚

ã€€ã€€å¦‚æœä¸å­˜åœ¨ package.json æˆ–è€…è¯¥æ–‡ä»¶é‡Œé¢æ²¡æœ‰mainå­—æ®µï¼Œnodejså°†è¯•å›¾åŠ è½½ index.js 

ã€€ã€€éƒ½ä¸å­˜åœ¨é‚£ä¹ˆå°±åªæœ‰è¯´ä¸€å£°Cannot find moduleäº†ã€‚

**Bï¼šé€šè¿‡æŸ¥æ‰¾node_modulesç›®å½•åŠ è½½æ¨¡å—**

å¦‚æœrequireå‚æ•°ä¸ä»¥â€/","./â€œ,"../â€å¼€å¤´ï¼Œè€Œè¯¥æ¨¡å—åˆä¸æ˜¯æ ¸å¿ƒæ¨¡å—ï¼Œé‚£ä¹ˆå°±è¦é€šè¿‡node_moduleåŠ è½½æ¨¡å—

åœ¨node_modulerç›®å½•çš„å¤–é¢ä¸€å±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨requireï¼ˆâ€˜expressâ€™)æ¥ä»£æ›¿requireï¼ˆ'./node_modules/express'),è¿™æ˜¯node.jsæ¨¡å—åŠ è½½çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œé€šè¿‡æŸ¥æ‰¾node_modulesäº†ç›®å½•æ¥åŠ è½½æ¨¡å—

`å½“requireé‡åˆ°ä¸€ä¸ªæ—¢ä¸æ˜¯æ ¸å¿ƒæ¨¡å—ï¼Œåˆä¸æ˜¯ä»¥è·¯å¾„å½¢å¼è¡¨ç¤ºçš„æ¨¡å—åç§°æ—¶ï¼Œä¼šè¯•å›¾åœ¨å½“å‰ç›®å½•ä¸‹çš„node_moduleç›®å½•ä¸­æŸ¥æ‰¾æ˜¯ä¸æ˜¯æœ‰è¿™æ ·ä¸€ä¸ªæ¨¡å—ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šåœ¨å½“å‰ç›®å½•çš„ä¸Šä¸€å±‚çš„node_moduleç›®å½•ä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œè¿”å›æ‰§è¡Œè¿™ä¸€è¿‡ç¨‹ï¼Œç›´åˆ°ié‡åˆ°æ ¹ç›®å½•ä½ç½®ã€‚`

æ³¨æ„ï¼š åœ¨nodeç¯å¢ƒï¼Œ`ES6ä¸­çš„æ¨¡å—åŒ–importï¼Œexportç›®å‰å°šæœªè¢«æ”¯æŒï¼Œå› æ­¤å®é™…ä½¿ç”¨éƒ½æ˜¯è½¬æ¢æˆ`requireï¼Œæ‰€ä»¥ä¹Ÿä¼šéµå¾ªnodejsæ¨¡å—æœºåˆ¶

â€‹			åœ¨.jsä¸­ï¼Œå®Œå…¨æŒ‰ç…§nodejsçš„æœºåˆ¶æ¥æŸ¥æ‰¾ï¼Œä½†æ˜¯å¦‚æœåœ¨.vueæ–‡ä»¶ä¸­ä½¿ç”¨importï¼Œé‚£ä¹ˆä¼šä¼˜å…ˆæŸ¥æ‰¾.vueæ–‡ä»¶ï¼Œè€Œä¸æ˜¯.jsã€.jsonå’Œ.nodeè¿™æ ·çš„é¡ºåº

### å…¨å±€å®‰è£…å’Œå±€éƒ¨å®‰è£…çš„åŒºåˆ«

![img](https://upload-images.jianshu.io/upload_images/2969533-08affe0da4f07da5.png?imageMogr2/auto-orient/strip|imageView2/2/w/880/format/webp)

#### æœ¬åœ°å®‰è£…

- å°†å®‰è£…åŒ…æ”¾åœ¨é¡¹ç›®çš„ æœ¬ç›®å½•ä¸­çš„node_modules ä¸‹ï¼ˆè¿è¡Œ npm å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ï¼‰å¦‚æœæ²¡æœ‰ node_modules ç›®å½•ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œnpm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆnode_modules ç›®å½•

- å¯ä»¥é€šè¿‡ require() æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…

  `æ³¨æ„ï¼šnodejsæ—¶ç”¨requireå¼•å…¥åŒ…ï¼ŒES6æ˜¯ç”¨import`

  `æœ€é‡è¦çš„æ˜¯å¦‚æœå¼•å…¥çš„åŒ…æœ¬åœ°æ²¡æœ‰ä¼šåˆ°å…¨å±€å®‰è£…çš„é‡Œé¢æ‰¾`

  `é‚£ä¸ºä»€ä¹ˆæœ‰äº›åŒ…åœ¨å…¨å±€å’Œå±€éƒ¨éƒ½è¦å®‰è£…å‘€ï¼Ÿ`

  `ç­”ï¼šå¦‚æœåªåœ¨å±€éƒ¨å®‰è£…ï¼Œé‚£ä¹ˆæƒ³è¦åœ¨å‘½ä»¤è¡Œè¿è¡Œä¸€äº›å‘½ä»¤çš„è¯å°±è¦è¾“å…¥ node ./node_modules/åŒ…å/bin/è„šæœ¬ï¼Œéå¸¸éº»çƒ¦ï¼Œ`

  â€‹		`å…¨å±€å®‰è£…ä¼šåœ¨åœ¨ç¯å¢ƒå˜é‡æ³¨å†Œï¼Œåªéœ€éœ€è¦è„šæœ¬åå­—å³å¯æ‰§è¡Œã€‚æ‰€ä»¥éœ€è¦åœ¨å‘½ä»¤è¡Œæ‰§è¡Œçš„åŒ…ä¸€èˆ¬éƒ½è¦å®‰è£…åˆ°å…¨å±€ã€‚`

  â€‹	 `å¦‚æœåªåœ¨å…¨å±€å®‰è£…ï¼Œåœ¨å‘½ä»¤è¡Œå’Œrequireï¼Œimportéƒ½å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œå› ä¸ºrequireå’Œimportå¦‚æœåœ¨node_modulesæ²¡æ‰¾åˆ°å°±ä¼šå–å…¨å±€ä¸­æ‰¾ï¼Œ`

  â€‹	`ä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸åŒé¡¹ç›®éƒ½ä½¿ç”¨åŒä¸€ä¸ªåŒ…ï¼Œè¿™æœ‰äº›æ—¶å€™ä¼šæœ‰å…¼å®¹é—®é¢˜ï¼Œæ¯”å¦‚é¡¹ç›®1éœ€è¦çš„æ˜¯10ç‰ˆæœ¬ï¼Œé¡¹ç›®2éœ€è¦çš„ç‰ˆæœ¬æ˜¯5ï¼Œä½†æ˜¯åªæœ‰å…¨å±€`

  â€‹		 `ä¸€ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½æœ‰å…¼å®¹é—®é¢˜ï¼Œè¿™æ—¶å€™å°±éœ€è¦åœ¨æœ¬åœ°å®‰è£…é€‚åˆè‡ªå·±çš„ç‰ˆæœ¬`

#### å…¨å±€å®‰è£…

- é»˜è®¤å°†å®‰è£…åŒ…æ”¾åœ¨C:\Users\web\AppData\Roaming\npm ä¸‹çš„ node_modules çš„å®‰è£…ç›®å½•
- å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨

## Yarn

### yarnçš„ç®€ä»‹ï¼š

Yarnæ˜¯facebookå‘å¸ƒçš„ä¸€æ¬¾å–ä»£npmçš„åŒ…ç®¡ç†å·¥å…·ã€‚

------

### yarnçš„ç‰¹ç‚¹ï¼š

- é€Ÿåº¦è¶…å¿«ã€‚
  - Yarn ç¼“å­˜äº†æ¯ä¸ªä¸‹è½½è¿‡çš„åŒ…ï¼Œæ‰€ä»¥å†æ¬¡ä½¿ç”¨æ—¶æ— éœ€é‡å¤ä¸‹è½½ã€‚ åŒæ—¶åˆ©ç”¨å¹¶è¡Œä¸‹è½½ä»¥æœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œå› æ­¤å®‰è£…é€Ÿåº¦æ›´å¿«ã€‚
- è¶…çº§å®‰å…¨ã€‚
  - åœ¨æ‰§è¡Œä»£ç ä¹‹å‰ï¼ŒYarn ä¼šé€šè¿‡ç®—æ³•æ ¡éªŒæ¯ä¸ªå®‰è£…åŒ…çš„å®Œæ•´æ€§ã€‚
- è¶…çº§å¯é ã€‚
  - ä½¿ç”¨è¯¦ç»†ã€ç®€æ´çš„é”æ–‡ä»¶æ ¼å¼å’Œæ˜ç¡®çš„å®‰è£…ç®—æ³•ï¼ŒYarn èƒ½å¤Ÿä¿è¯åœ¨ä¸åŒç³»ç»Ÿä¸Šæ— å·®å¼‚çš„å·¥ä½œã€‚

------

### yarnçš„å®‰è£…:

1. ä¸‹è½½node.jsï¼Œä½¿ç”¨npmå®‰è£…
   `npm install -g yarn`
   `æŸ¥çœ‹ç‰ˆæœ¬ï¼šyarn --version`
2. å®‰è£…node.js,ä¸‹è½½yarnçš„å®‰è£…ç¨‹åº:
   [æä¾›ä¸€ä¸ª.msiæ–‡ä»¶ï¼Œåœ¨è¿è¡Œæ—¶å°†å¼•å¯¼æ‚¨åœ¨Windowsä¸Šå®‰è£…Yarn](https://yarnpkg.com/en/docs/install#windows-stable)
3. Yarn æ·˜å®æºå®‰è£…ï¼Œåˆ†åˆ«å¤åˆ¶ç²˜è´´ä»¥ä¸‹ä»£ç è¡Œåˆ°é»‘çª—å£è¿è¡Œå³å¯
   yarn config set registry `https://registry.npm.taobao.org -g`
   yarn config set sass_binary_site `http://cdn.npm.taobao.org/dist/node-sass -g`

------

### yarnçš„å¸¸ç”¨å‘½ä»¤ï¼š

- å®‰è£…yarn

  - `npm install -g yarn`

- å®‰è£…æˆåŠŸåï¼ŒæŸ¥çœ‹ç‰ˆæœ¬å·ï¼š

  - `yarn --version`

- åˆ›å»ºæ–‡ä»¶å¤¹ yarn

  - `md yarn`

- è¿›å…¥yarnæ–‡ä»¶å¤¹

  - `cd yarn`

- åˆå§‹åŒ–é¡¹ç›®

  - `yarn init // åŒnpm initï¼Œæ‰§è¡Œè¾“å…¥ä¿¡æ¯åï¼Œä¼šç”Ÿæˆpackage.jsonæ–‡ä»¶`

- yarnçš„é…ç½®é¡¹ï¼š

  - `yarn config list // æ˜¾ç¤ºæ‰€æœ‰é…ç½®é¡¹`
  - `yarn config get <key> //æ˜¾ç¤ºæŸé…ç½®é¡¹`
  - `yarn config delete <key> //åˆ é™¤æŸé…ç½®é¡¹`
  - `yarn config set <key> <value> [-g|--global] //è®¾ç½®é…ç½®é¡¹`

- å®‰è£…åŒ…ï¼š

  - `yarn install //å®‰è£…package.jsoné‡Œæ‰€æœ‰åŒ…ï¼Œå¹¶å°†åŒ…åŠå®ƒçš„æ‰€æœ‰ä¾èµ–é¡¹ä¿å­˜è¿›yarn.lock`
  - `yarn install --flat //å®‰è£…ä¸€ä¸ªåŒ…çš„å•ä¸€ç‰ˆæœ¬`
  - `yarn install --force //å¼ºåˆ¶é‡æ–°ä¸‹è½½æ‰€æœ‰åŒ…`
  - `yarn install --production //åªå®‰è£…dependenciesé‡Œçš„åŒ…`
  - `yarn install --no-lockfile //ä¸è¯»å–æˆ–ç”Ÿæˆyarn.lock`
  - `yarn install --pure-lockfile //ä¸ç”Ÿæˆyarn.lock`

- æ·»åŠ åŒ…ï¼ˆä¼šæ›´æ–°package.jsonå’Œyarn.lockï¼‰ï¼š

  - `yarn add [package] // åœ¨å½“å‰çš„é¡¹ç›®ä¸­æ·»åŠ ä¸€ä¸ªä¾èµ–åŒ…ï¼Œä¼šè‡ªåŠ¨æ›´æ–°åˆ°package.jsonå’Œyarn.lockæ–‡ä»¶ä¸­`
  - `yarn add [package]@[version] // å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯ä¸»è¦ç‰ˆæœ¬ï¼Œå¦‚æœéœ€è¦ç²¾ç¡®åˆ°å°ç‰ˆæœ¬ï¼Œä½¿ç”¨-Eå‚æ•°`
  - `yarn add [package]@[tag] // å®‰è£…æŸä¸ªtagï¼ˆæ¯”å¦‚beta,nextæˆ–è€…latestï¼‰`

  //ä¸æŒ‡å®šä¾èµ–ç±»å‹é»˜è®¤å®‰è£…åˆ°dependenciesé‡Œï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šä¾èµ–ç±»å‹ï¼š

  - `yarn add --dev/-D // åŠ åˆ° devDependencies`
  - `yarn add --peer/-P // åŠ åˆ° peerDependencies`
  - `yarn add --optional/-O // åŠ åˆ° optionalDependencies`

  //é»˜è®¤å®‰è£…åŒ…çš„ä¸»è¦ç‰ˆæœ¬é‡Œçš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤å¯ä»¥æŒ‡å®šç‰ˆæœ¬ï¼š

  - `yarn add --exact/-E // å®‰è£…åŒ…çš„ç²¾ç¡®ç‰ˆæœ¬ã€‚ä¾‹å¦‚yarn add foo@1.2.3ä¼šæ¥å—1.9.1ç‰ˆï¼Œä½†æ˜¯yarn add foo@1.2.3 --exactåªä¼šæ¥å—1.2.3ç‰ˆ`
  - `yarn add --tilde/-T // å®‰è£…åŒ…çš„æ¬¡è¦ç‰ˆæœ¬é‡Œçš„æœ€æ–°ç‰ˆã€‚ä¾‹å¦‚yarn add foo@1.2.3 --tildeä¼šæ¥å—1.2.9ï¼Œä½†ä¸æ¥å—1.3.0`

- å‘å¸ƒåŒ…

  - `yarn publish`

- ç§»é™¤ä¸€ä¸ªåŒ…

  - `yarn remove <packageName>ï¼šç§»é™¤ä¸€ä¸ªåŒ…ï¼Œä¼šè‡ªåŠ¨æ›´æ–°package.jsonå’Œyarn.lock`

- æ›´æ–°ä¸€ä¸ªä¾èµ–

  - `yarn upgrade ç”¨äºæ›´æ–°åŒ…åˆ°åŸºäºè§„èŒƒèŒƒå›´çš„æœ€æ–°ç‰ˆæœ¬`

- è¿è¡Œè„šæœ¬

  - `yarn run ç”¨æ¥æ‰§è¡Œåœ¨ package.json ä¸­ scripts å±æ€§ä¸‹å®šä¹‰çš„è„šæœ¬`

- æ˜¾ç¤ºæŸä¸ªåŒ…çš„ä¿¡æ¯

  - `yarn info <packageName> å¯ä»¥ç”¨æ¥æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯`

- ç¼“å­˜

  - ```
    yarn cache
    ```

    - `yarn cache list # åˆ—å‡ºå·²ç¼“å­˜çš„æ¯ä¸ªåŒ…yarn cache dir # è¿”å› å…¨å±€ç¼“å­˜ä½ç½®yarn cache clean # æ¸…é™¤ç¼“å­˜`

------

### npm ä¸ yarnå‘½ä»¤æ¯”è¾ƒ:

![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180802111644352?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3MDB5dw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

------

### npm ä¸ yarnç›¸å…³é—®é¢˜æ¯”è¾ƒ:

#### npmæ¨¡å—çš„ä¾èµ–:

- npmå­˜åœ¨ä¸€äº›å†å²é—ç•™é—®é¢˜ï¼Œè¯·çœ‹ä¸‹å›¾ï¼š
  ![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180802112405890?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3MDB5dw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

> æ¯”å¦‚è¯´ä½ çš„é¡¹ç›®æ¨¡å—ä¾èµ–æ˜¯å›¾ä¸­æè¿°çš„ï¼Œ@1.2.1ä»£è¡¨è¿™ä¸ªæ¨¡å—çš„ç‰ˆæœ¬ã€‚åœ¨ä½ å®‰è£…Açš„æ—¶å€™éœ€è¦å®‰è£…ä¾èµ–Cå’ŒDï¼Œå¾ˆå¤šä¾èµ–ä¸ä¼šæŒ‡å®šç‰ˆæœ¬å·ï¼Œé»˜è®¤ä¼šå®‰è£…æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè¿™æ ·å°±ä¼šå‡ºç°é—®é¢˜ï¼šæ¯”å¦‚ä»Šå¤©å®‰è£…æ¨¡å—çš„æ—¶å€™Cå’ŒDæ˜¯æŸä¸€ä¸ªç‰ˆæœ¬ï¼Œè€Œå½“ä»¥åCã€Dæ›´æ–°çš„æ—¶å€™ï¼Œå†æ¬¡å®‰è£…æ¨¡å—å°±ä¼šå®‰è£…Cå’ŒDçš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚æœæ–°çš„ç‰ˆæœ¬æ— æ³•å…¼å®¹ä½ çš„é¡¹ç›®ï¼Œä½ çš„ç¨‹åºå¯èƒ½å°±ä¼šå‡ºBUGï¼Œç”šè‡³æ— æ³•è¿è¡Œã€‚è¿™å°±æ˜¯npmçš„å¼Šç«¯ï¼Œè€Œyarnä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æ¨å‡ºäº†yarn.lockçš„æœºåˆ¶ï¼Œè¿™æ˜¯ä½œè€…é¡¹ç›®ä¸­çš„yarn.lockæ–‡ä»¶ã€‚

###### yarn.lockæ–‡ä»¶æ ¼å¼:

![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180802112843688?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3l3MDB5dw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

> å¤§å®¶ä¼šçœ‹åˆ°ï¼Œè¿™ä¸ªæ–‡ä»¶å·²ç»æŠŠä¾èµ–æ¨¡å—çš„ç‰ˆæœ¬å·å…¨éƒ¨é”å®šï¼Œå½“ä½ æ‰§è¡Œyarn installçš„æ—¶å€™ï¼Œyarnä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶è·å¾—ä¾èµ–çš„ç‰ˆæœ¬å·ï¼Œç„¶åä¾ç…§è¿™ä¸ªç‰ˆæœ¬å·å»å®‰è£…å¯¹åº”çš„ä¾èµ–æ¨¡å—ï¼Œè¿™æ ·ä¾èµ–å°±ä¼šè¢«é”å®šï¼Œä»¥åå†ä¹Ÿä¸ç”¨æ‹…å¿ƒç‰ˆæœ¬å·çš„é—®é¢˜äº†ã€‚å…¶ä»–äººæˆ–è€…å…¶ä»–ç¯å¢ƒä¸‹ä½¿ç”¨çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªyarn.lockæ‹·è´åˆ°ç›¸åº”çš„ç¯å¢ƒé¡¹ç›®ä¸‹å†å®‰è£…å³å¯ã€‚
> æ³¨æ„ï¼šè¿™ä¸ªæ–‡ä»¶ä¸è¦æ‰‹åŠ¨ä¿®æ”¹å®ƒï¼Œå½“ä½ ä½¿ç”¨ä¸€äº›æ“ä½œå¦‚yarn addæ—¶ï¼Œyarnä¼šè‡ªåŠ¨æ›´æ–°yarn.lockã€‚

## Node.jså¼‚æ­¥ç¼–ç¨‹

### **åŒæ­¥APIå’Œå¼‚æ­¥API**

  åŒæ­¥APIï¼šåªæœ‰å½“å‰APIæ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªAPIï¼›
		 å¼‚æ­¥APIï¼šå½“å‰APIçš„æ‰§è¡Œä¸ä¼šé˜»å¡åç»­ä»£ç çš„æ‰§è¡Œã€‚

<img src="https://img2020.cnblogs.com/blog/2029744/202005/2029744-20200529163708264-154808968.png" alt="img" style="zoom:80%;" />

`åŒºåˆ«ä¸€ï¼š åŒæ­¥å¼‚æ­¥ä»£ç æ‰§è¡Œé¡ºåº`

åŒæ­¥ï¼šä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ‰§è¡Œï¼Œå‰é¢ä»£ç ä¼šé˜»å¡åé¢ä»£ç çš„æ‰§è¡Œã€‚
	   å¼‚æ­¥ï¼šä¸ä¼šç­‰å¾…APIæ‰§è¡Œå®Œæˆåå†å‘ä¸‹æ‰§è¡Œä»£ç ã€‚

1ã€åŒæ­¥ä»£ç å…ˆæ‰§è¡Œï¼ŒæŒ‰å…ˆåé¡ºåºæ‰§è¡Œ

ã€€ã€€ä¹Ÿå°±æ˜¯å…ˆæ‰§è¡Œconsole.log('ä»£ç å¼€å§‹æ‰§è¡Œâ€˜ï¼‰

ã€€ã€€å†æ‰§è¡Œconsole.log('ä»£ç æ‰§è¡Œç»“æŸâ€™ï¼‰

2ã€å¼‚æ­¥ä»£ç ä¼šæ”¾åˆ°å¼‚æ­¥ä»£ç æ‰§è¡ŒåŒºï¼Œå¼‚æ­¥å‡½æ•°ä¸­çš„å›è°ƒå‡½æ•°ä¼šæ”¾åˆ°å›è°ƒå‡½æ•°é˜Ÿåˆ—

ã€€ã€€å½“åŒæ­¥ä»£ç åŒºçš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¼‚æ­¥ä»£ç åŒºçš„ä»£ç ä¼šåŒæ—¶æ‰§è¡Œï¼Œè®°ä½ï¼šæ˜¯åŒæ—¶æ‰§è¡Œï¼Œ

ã€€ã€€0såï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨æ‰§è¡Œå®Œæ¯•ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œè¿™ä¸ªå¼‚æ­¥å‡½æ•°ä¸­å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œ

ã€€ã€€ä¹Ÿå°±æ˜¯æ‰§è¡Œconsole.log('â€˜â€œ0ç§’â€åæ‰§è¡Œçš„ä»£ç â€™ï¼‰ï¼›

ã€€ã€€2såï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨æ‰§è¡Œå®Œæ¯•ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œè¿™ä¸ªå¼‚æ­¥å‡½æ•°ä¸­å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œ

ã€€ã€€ä¹Ÿå°±æ˜¯æ‰§è¡Œconsole.log('â€˜â€œ2ç§’â€åæ‰§è¡Œçš„ä»£ç â€™ï¼‰ï¼›

æœ€åè¾“å‡ºç»“æœæ˜¯ï¼šä»£ç å¼€å§‹æ‰§è¡Œ

ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä»£ç æ‰§è¡Œç»“æŸ

ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€â€œ0ç§’â€åæ‰§è¡Œçš„ä»£ç 

ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€â€œ2ç§’â€åæ‰§è¡Œçš„ä»£ç 

  `åŒºåˆ«2ï¼šåŒæ­¥APIå¯ä»¥ä»è¿”å›å€¼ä¸­æ‹¿åˆ°APIæ‰§è¡Œç»“æœï¼Œå¼‚æ­¥ä¸è¡Œã€‚`

â€‹			å› ä¸ºå¼‚æ­¥å‡½æ•°ä¼šåœ¨æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•å†æ‰§è¡Œ

## 	å›è°ƒå‡½æ•°

ç”±äºå¼‚æ­¥APIæ— æ³•ç›´æ¥è·å–åˆ°è¿”å›å€¼ï¼Œæ‰€ä»¥å¾—ä¾é å›è°ƒå‡½æ•°

```
     function get(callback) {
       setTimeout(function () {
         callback({
           msg: 'hello node.js',
         })
       }, 2000)
     }
     get(function (data) {
       console.log(data)
     })
```

#### å¤„ç†å¼‚æ­¥API

å¦‚æœå¼‚æ­¥APIåé¢ä»£ç å¾—æ‰§è¡Œä¾èµ–å½“å‰å¼‚æ­¥APIçš„æ‰§è¡Œç»“æœï¼Œä½†å®é™…ä¸Šåç»­ä»£ç åœ¨æ‰§è¡Œçš„æ—¶å€™å¼‚æ­¥APIè¿˜æ²¡æœ‰è¿”å›ç»“æœï¼Œè¿™ä¸ªé—®é¢˜è¦æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ

ä¾‹å¦‚ï¼š

```
	fs.readFile('./demo.txt',(err,result)=>{
	})
	console.log('æ–‡ä»¶è¯»å–å®Œæ¯•')
```

è¿™æ—¶å€™åé¢çš„å› ä¸ºæ˜¯åŒæ­¥ä»£ç ï¼Œé‚£ä¹ˆå®é™…ä¸Šä¼šæ¯”å®ƒå‰é¢çš„å¼‚æ­¥ä»£ç æ›´å…ˆæ‰§è¡Œï¼Œæ‰€ä»¥è¿™å›å¯¼è‡´ä¸€äº›é—®é¢˜

æœ€ç®€å•çš„è§£å†³æ–¹æ³•æ˜¯è¿™æ ·ï¼š

```
	fs.readFile('./demo.txt',(err,result)=>{
	console.log('æ–‡ä»¶è¯»å–å®Œæ¯•')
	})
```

ä½†æ˜¯å½“ä¾èµ–çš„å¼‚æ­¥APIå¤šäº†ï¼Œåˆä¼šäº§ç”Ÿå›è°ƒåœ°ç‹±çš„é—®é¢˜

#### å›è°ƒåœ°ç‹±

```
const fs = require('fs')
fs.readFile('./1.txt', 'utf-8', (err, result1) => {
  console.log(result1)
  fs.readFile('./2.txt', 'utf-8', (err, result2) => {
    console.log(result2)
    fs.readFile('./3.txt', 'utf-8', (err, result3) => {
      console.log(result3)
    })
  })
})
```

#### å›è°ƒåœ°ç‹±ä¼˜åŒ–

```
function fn1() {
  fs.readFile('./1.txt', 'utf-8', (err, result1) => {
    console.log(result1)
    fn2(result1)
  })
}
function fn2 (result1) {
  fs.readFile('./2.txt', 'utf-8', (err, result2) => {
    console.log(result1+result2)
    fn3(result1 + result2)
  })
}
function fn3 (result2) {
  fs.readFile('./3.txt', 'utf-8', (err, result3) => {
    console.log(result2+result3)
  })
}
fn1()
```

#### ä½¿ç”¨generatorä¼˜åŒ–

```
function fn1() {
  fs.readFile('./1.txt', 'utf-8', (err, result1) => {
    console.log(result1)
    it.next(result1)
  })
}
function fn2 (result1) {
  fs.readFile('./2.txt', 'utf-8', (err, result2) => {
    console.log(result1+result2)
    it.next(result1+result2)
  })
}
function fn3 (result1,result2) {
  fs.readFile('./3.txt', 'utf-8', (err, result3) => {
    console.log(result1+result2+result3);
    it.next(result1+result2)
  })
}
function *main() {
  let result1 = yield fn1()
  let result2 = yield fn2(result1)
  let result3 = yield fn3(result1,result2)
}
let it = main()
it.next()
```

#### Promise

**Promiseå‡ºç°çš„ç›®çš„æ˜¯è§£å†³Node.jså¼‚æ­¥ç¼–ç¨‹ä¸­å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚**

**Promiseå…¶å®æ˜¯ä¸Šé¢å›è°ƒåœ°ç‹±çš„ä¼˜åŒ–ï¼Œå®é™…åŸç†ä¸€æ ·ã€‚**

```
let promise1 = new Promise((resolve, reject) => {
  fs.readFile('./1.txt', (err, result) => {
    if (err != null) {
      resolve(result)
    } else {
      reject(err)
    }
  })
})
promise1
  .then((result) => {
    console.log(result)
  })
  .catch((err) => {
    console.log(err)
  })
```

å¦‚æœpromise1é‡Œé¢çš„reslove(result)æˆåŠŸæ‰§è¡Œå®Œæ¯•ï¼Œé‚£ä¹ˆæ‰ä¼šè°ƒç”¨åé¢çš„promise1.thenä¸­çš„æ–¹æ³•ï¼Œå¦åˆ™æ‰§è¡Œ.catchä¸­çš„æ–¹æ³•

ä¼˜åŒ–ä¸Šé¢çš„å›è°ƒåœ°ç‹±é—®é¢˜

```
const fs = require('fs')
function p1() {
  return new Promise((resolve, reject) => {
    fs.readFile('./1.txt', (err, result1) => {
      if (err != null) {
        reject(err)
      } else {
        resolve(result1)
      }
    })
  })
}
function p2() {
  return new Promise((resolve, reject) => {
    fs.readFile('./2.txt', (err, result1) => {
      if (err != null) {
        reject(err)
      } else {
        resolve(result1)
      }
    })
  })
}
function p3() {
  return new Promise((resolve, reject) => {
    fs.readFile('./3.txt', (err, result1) => {
      if (err != null) {
        reject(err)
      } else {
        resolve(result1)
      }
    })
  })
}
p1().then((r1) => {
  console.log(r1)
  return p2()
})
  .catch((err) => {
    console.log(err)
    return p2()
  })
  .then((r2) => {
    console.log(r2)
    return p3()
  })
  .catch((err) => {
    console.log(err)
    return p3()
  })
  .then((r3) => {
    console.log(r1)
  })
  .catch((err) => {
    console.log(err)
  })

```

è™½ç„¶ä¸Šé¢çš„ç»“æ„æ¯”å›è°ƒåœ°ç‹±æ›´åŠ æ¸…æ™°æ›´å¥½ç»´æŠ¤äº†ï¼Œä½†è¿˜æ˜¯æ¯”è¾ƒç¹çï¼Œæ‰€ä»¥ä¸‹é¢å°†ä»‹ç»æ›´å¥½çš„å¼‚æ­¥å‡½æ•°æ–¹æ³•

#### å¼‚æ­¥å‡½æ•°

å¼‚æ­¥å‡½æ•°æ˜¯å¼‚æ­¥å‡½æ•°ç¼–ç¨‹è¯­æ³•çš„ç»ˆæè§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬å°†å¼‚æ­¥ä»£ç å†™æˆåŒæ­¥çš„å½¢å¼ï¼Œè®©ä»£ç ä¸å†æœ‰å›è°ƒå‡½æ•°åµŒå¥—ï¼Œæ˜¯ä»£ç æ¸…æ™°æ˜äº†ã€‚

asyncå…³é”®å­—

1ã€æ™®é€šå‡½æ•°å®šä¹‰å‰åŠ asyncå…³é”®å­— æ™®é€šå‡½æ•°å˜æˆå¼‚æ­¥å‡½æ•°

2ã€å¼‚æ­¥å‡½æ•°é»˜è®¤è¿”å›promise

3ã€åœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨ä½¿ç”¨returnå…³é”®å­—è¿›è¡Œç»“æœè¿”å› ç»“æœä¼šè¢«åŒ…è£¹åœ¨promiseå¯¹è±¡ä¸­ returnå…³é”®å­—ä»£æ›¿äº†resolveæ–¹æ³•

4ã€åœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨ä½¿ç”¨throwå…³é”®å­—è¿›è¡Œå¼‚å¸¸æŠ›å‡º

```
	async function fn(){}
```

awaitå…³é”®å­—

1ã€await	

â€‹	å¤„ç†ä¸€ä¸ªPromise,Promiseä¸­çš„resolve()ä¼šé˜»æ–­ä¸‹é¢çš„ä»£ç æ‰§è¡Œï¼Œå½“promiseä¸­çš„resolveæ‰§è¡Œå®Œæ¯•æ‰ä¼šæ‰§è¡Œä¸‹é¢çš„ä»£ç 

```
function p1() {
  return new Promise((resolve) => {
    setTimeout(function () {
      console.log(1)
      resolve()
    }, 3000)
  })
}
function p2() {
  return new Promise((resolve) => {
    setTimeout(function () {
      console.log(2)
      resolve()
    }, 2000)
  })
}
function p3() {
  return new Promise((resolve) => {
    setTimeout(function () {
      console.log(3)
    }, 1000)
  })
}
async function run() {
  await p1()
  await p2()
  await p3()
}
run()

```

å¦‚æœawait åé¢çš„promiseæ‰§è¡Œçš„æ˜¯rejectï¼Œé‚£ä¹ˆä¸‹é¢çš„ä»£ç å°±æ— æ³•æ‰§è¡Œï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡tryï¼Œcatchæ¥è¿›è¡Œå¤„ç†

```
function p1() {
  return new Promise((resolve, reject) => {
    setTimeout(function() {
      console.log(1)
      reject()
    }, 3000)
  })
}
function p2() {
  return new Promise((resolve) => {
    setTimeout(function() {
      console.log(2)
      resolve()
    }, 2000)
  })
}
function p3() {
  return new Promise((resolve) => {
    setTimeout(function() {
      console.log(3)
    }, 1000)
  })
}
async function run() {
  try {
    await p1()
  } catch (e) {
    await p2()
    await p3()
  }
}
run()
```

å¦‚æœawaitåé¢è·Ÿçš„æ˜¯åŒæ­¥ä»£ç ï¼Œé‚£ä¹ˆæ˜¯ä¸ä¼šé˜»å¡ä¸‹é¢æ‰§è¡Œçš„ä»£ç 

**await promise,awaitå¯ä»¥æ¥æ”¶pormiseä¸­resolve(æ•°æ®)ä¸­å‚æ•°çš„æ•°æ®**

try	catchå¯ä»¥æ•è·rejectï¼ˆï¼‰ä¸­çš„å‚æ•°

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220439.png" alt="image-20201108105211110" style="zoom:67%;" />

![image-20201108105233474](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220444.png)

`res.send('dsds')å‘é€çš„æ•°æ®ä¼šåŒ…è£¹åœ¨ä¸€ä¸ªpromiseçš„resolveä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨async awaitæ¥æ”¶å®ƒï¼Œ`

`è€Œä¸”æ•°æ®åº“æ“ä½œæ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯è¿™æ ·çš„å½¢å¼ï¼Œæ•°æ®åŒ…å«åœ¨promiseçš„resolveä¸­ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä½¿ç”¨async awaitè·å–`

**é‚£ä¹ˆasync/awaitçš„å†™æ³•å’Œyieldç›¸æ¯”å­°ä¼˜å­°åŠ£å‘¢ï¼Ÿ**
 å…¶å®ä¸ªäººæ„Ÿè§‰ä¸¤è€…éƒ½æœ‰è‡ªå·±ç‹¬åˆ°çš„é•¿å¤„ï¼Œæ²¡æœ‰ä¼˜åŠ£ä¹‹åˆ†(çº¯å±ä¸ªäººè§è§£ï¼Œä¸å–œå‹¿å–·)

- async/awaitåœ¨å¤„ç†promiseçš„å±‚é¢ä¸Šçœç•¥äº†å¯¹å†³è®®çš„äººå·¥å¤„ç†ï¼Œè®©ä»£ç é‡å¾—ä»¥å‡å°‘ï¼Œè¯­ä¹‰ä¸Šä¹Ÿæ›´å®¹æ˜“ç†è§£ã€‚
- yieldåŒ…å®¹æ€§æ›´å¹¿æ³›ï¼Œasyncåªèƒ½æ¥å£promiseï¼Œyieldé™¤æ­¤ä¹‹å¤–è¿˜èƒ½æ¥æ”¶å­—ç¬¦ä¸²ã€æ•°ç»„ã€å¯¹è±¡ç­‰å„ç§ç±»å‹çš„æ•°æ®

## nodejså…¨å±€å¯¹è±¡global



## Expressæ¡†æ¶

### ç¯å¢ƒé…ç½®

```
npm install express --save
```

### åŸºæœ¬ä½¿ç”¨

åˆ›å»ºindex.jsæ–‡ä»¶

è¾“å…¥ä»¥ä¸‹ä»£ç ï¼Œå³å¯å»ºç«‹ä¸€ä¸ªæœåŠ¡å™¨ï¼š

```
     const express = require('express')
     //åˆ›å»ºç½‘ç«™æœåŠ¡å™¨
     const app = express()
     //å¤„ç†è¯·æ±‚    
     app.get('/', (req, res) => 
     	//sendä¼šæŠŠå‚æ•°è½¬æ¢ä¸ºJSONæ ¼å¼
     	res.send('Hello World!')
     )
     //ç›‘å¬ç«¯å£
     app.listen(3000)
```

æ‰§è¡Œå‘½ä»¤ç”¨node index.jsæˆ–è€…vscodeä¸­çš„run codeæŒ‰é’®

åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥http://localhost:3000

ç»“æœï¼š

![image-20201017163851567](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220448.png)

å‘é€ç½‘é¡µ

![image-20201109002849094](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220452.png)

å®‰è£…corsæ’ä»¶å¤„ç†è·¨åŸŸ

```
npm i cors --save
```

ä»£ç ï¼š

```
     //å…è®¸è·¨åŸŸ
     app.use(require('cors')())
```

ä¸Šé¢æ˜¯expressæ¡†æ¶å¤„ç†è·¨åŸŸçš„æ–¹æ¡ˆï¼Œä¸‹é¢æ˜¯koa2çš„å¤„ç†æ–¹æ¡ˆï¼š

```
  ctx.set('Access-Control-Allow-Origin', '*')
  ctx.set('Access-Control-Allow-Methods', 'OPTIONS, GET, PUT, POST, DELETE')
```



### ä¸­é—´ä»¶

#### **ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Ÿ**

**get\post\use**

ä¸­é—´ä»¶å°±æ˜¯ä¸€å †æ–¹æ³•ï¼Œå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ã€å¯ä»¥å¯¹è¯·æ±‚åšå‡ºå“åº”ï¼Œä¹Ÿå¯ä»¥å°†è¯·æ±‚ç»§ç»­å‘ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ç»§ç»­å¤„ç†

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220456.png" alt="image-20201021180256354" style="zoom: 50%;" />



ä¸­é—´ä»¶ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼Œä¸­é—´ä»¶æ–¹æ³•ä»¥åŠè¯·æ±‚å¤„ç†å‡½æ•°ã€‚

ä¸­é—´ä»¶æ–¹æ³•ç”±Expressæä¾›ï¼Œè´Ÿè´£æ‹¦æˆªè¯·æ±‚ï¼Œè¯·æ±‚å¤„ç†å‡½æ•°ç”±å¼€å‘äººå‘˜æä¾›ï¼Œè´Ÿè´£å¤„ç†è¯·æ±‚ã€‚

ä¸‹é¢å°±æ˜¯ä¸­é—´ä»¶çš„ä½¿ç”¨ä¾‹å­

![image-20201021180518109](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220501.png)

ä¸­é—´ä»¶å¯ä»¥é’ˆå¯¹åŒä¸€ä¸ªè¯·æ±‚è®¾ç½®å¤šä¸ªä¸­é—´ä»¶ï¼Œå¯¹åŒä¸€ä¸ªè¯·æ±‚è¿›è¡Œå¤šæ¬¡å¤„ç†ã€‚

**é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯·æ±‚ä»ä¸Šåˆ°ä¸‹ä¸€æ¬¡åŒ¹é…ä¸­é—´ä»¶ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œç»ˆæ­¢åŒ¹é…ã€‚**

**å¯ä»¥è°ƒç”¨nextæ–¹æ³•å°†è¯·æ±‚çš„æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œç›´åˆ°é‡åˆ°ç»“æŸè¯·æ±‚çš„ä¸­é—´ä»¶**

![image-20201021180636813](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220504.png)

app.useåŒ¹é…æ‰€æœ‰çš„è¯·æ±‚æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥ä¼ å…¥è¯·æ±‚å¤„ç†å‡½æ•°ï¼Œä»£è¡¨æ‰€æœ‰çš„è¯·æ±‚ã€‚

![image-20201021181125039](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220507.png)

app.useç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿå¯ä»¥ä¼ å…¥è¯·æ±‚åœ°å€ï¼Œä»£è¡¨ä¸è®ºä»€ä¹ˆè¯·æ±‚æ–¹å¼ï¼Œåªè¦æ˜¯è¿™ä¸ªè¯·æ±‚åœ°å€å°±æ¥å—è¿™ä¸ªè¯·æ±‚ã€‚

![image-20201021181624030](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220510.png)

getå’Œpostè¦å®Œå…¨åŒ¹é…è·¯å¾„æ‰èƒ½æ‰§è¡Œï¼Œuseçš„åªéœ€è¦è¯·æ±‚çš„è·¯å¾„ä¸­æœ‰å…¶ä¸­çš„ä¸€éƒ¨åˆ†å°±å¥½ï¼Œ

æ¯”å¦‚ï¼š

```
     admin.use('/index', (req, res) => {
       res.send('ä½ å¥½')
     })
```

![image-20201021184930673](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220514.png)

è™½ç„¶useä¸­çš„è·¯å¾„æ—¶'/index',ä½†æ˜¯ä¹Ÿèƒ½å¤„ç†/index/homeæˆ–è€…/index/aa/bbçš„è¯·æ±‚urlï¼Œè€Œgetå’Œpoståˆ™ä¸èƒ½,éœ€è¦å®Œå…¨åŒ¹é…

#### **ä¸­é—´ä»¶useçš„åº”ç”¨**

![image-20201021182507688](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210505221853.png)

**1ã€è·¯ç”±ä¿æŠ¤**

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220516.png" alt="image-20201021182001816" style="zoom:67%;" />

**2ã€ç½‘ç«™ç»´æŠ¤å…¬å‘Š**

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220519.png" alt="image-20201021182113323" style="zoom:67%;" />

**3ã€è‡ªå®šä¹‰404é¡µé¢ï¼Œres.statusè®¾ç½®çŠ¶æ€ç ï¼Œå¹¶ä¸”å¯ä»¥é“¾å¼è°ƒç”¨sendæ–¹æ³•**

![image-20201021182348620](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220523.png)

#### **é”™è¯¯å¤„ç†ä¸­é—´ä»¶**

åœ¨ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…çš„ä¼šå‡ºç°ä¸€äº›æ— æ³•é¢„æ–™çš„é”™è¯¯ï¼Œæ¯”å¦‚æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œæ•°æ®åº“è¿æ¥å¤±è´¥ã€‚

é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ˜¯ä¸€ä¸ªé›†ä¸­å¤„ç†é”™è¯¯çš„åœ°æ–¹

![image-20201021182904041](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220527.png)

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220530.png" alt="image-20201021183036453" style="zoom:67%;" />

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220534.png" alt="image-20201021183327830" style="zoom:67%;" />

å½“next()æ–¹æ³•ä¸­çš„å‚æ•°ä¼ é€’äº†errå°±ä»£è¡¨è¦è§¦å‘é”™è¯¯å¤„ç†ä¸­é—´ä»¶

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220538.png" alt="image-20201021183522084" style="zoom:67%;" />

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220542.png" alt="image-20201021183829818" style="zoom:67%;" />

æ³¨æ„ï¼šä¸€ä¸ªè¯·æ±‚åªèƒ½æœ‰ä¸€ä¸ªå›åº”ï¼Œä¸ç„¶å¤„ç†ç¬¬ä¸€ä¸ªå›åº”çš„å…¶ä»–å›åº”æ— æ•ˆï¼Œå¹¶ä¸”æœåŠ¡å™¨ç«¯æŠ¥é”™

### æ¨¡å—åŒ–è·¯ç”±

#### åŸºæœ¬ä½¿ç”¨

![image-20201021184126294](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220546.png)

ä¸Šé¢ä»£ç çš„ä¸»è¦æ€è·¯æ˜¯ï¼š

å½“è®¿é—®/home/indexçš„è·¯å¾„æ—¶ï¼Œuseä¸­é—´ä»¶ä¼šæ¥æ”¶ï¼Œç„¶åæŠŠå®ƒäº¤ç»™homeè¿™ä¸ªRouterå¤„ç†ï¼Œ

homeè¿™ä¸ªRouterä¼šæŠŠ/homeå»æ‰ï¼Œç„¶åè¿™æ ·getå°±èƒ½åŒ¹é…åˆ°/indexè¿™ä¸ªè·¯å¾„äº†

![image-20201021192752209](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220550.png)

### GETå‚æ•°çš„è·å–

Expressæ¡†æ¶ä¸­ä½¿ç”¨req.queryå³å¯è·å–GETå‚æ•°ï¼Œæ¡†æ¶å†…éƒ¨ä¼šå°†GETå‚æ•°è½¬æ¢ä¸ºå¯¹è±¡å¹¶è¿”å›

![image-20201021193054196](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220559.png)

è¦æ³¨æ„ï¼Œ

```
     // !ç”¨æˆ·åˆ—è¡¨
     source.get('/list', async (req, res) => {
       //!æ•°æ®åº“æ“ä½œæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªpromise
       let data = await adminModel.find()
       res.send(data)
     })
```

ç½‘ç»œè¯·æ±‚ï¼š

```
	getUserList() {
      let list = this.$http.get('/list')
      console.log(list)
    },
```

è¿™æ ·è¿”å›çš„æ˜¯ä¸€ä¸ªprmiseresult

![image-20201105092203258](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210505221901.png)

å› ä¸ºç½‘ç»œè¯·æ±‚ä¼šæŠŠè¿”å›çš„ç»“æœå¥—ä¸Šä¸€å±‚ï¼Œå˜æˆpromiseå¯¹è±¡

æ‰€ä»¥æˆ‘ä»¬è¦ç”¨asyncï¼Œawaitå¤„ç†ï¼Œawaitä¼šæ‰§è¡Œpromiseå¯¹è±¡ï¼Œæœ€åè¿”å›æ•°æ®

```
  async getUserList() {
      let list = await this.$http.get('/list')
      console.log(list)
    },
```

è¾“å‡ºï¼š

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210505221911.png" alt="image-20201105092806980" style="zoom:80%;" />

### POSTå‚æ•°çš„è·å–

Expressä¸­æ¥å—postè¯·æ±‚å‚æ•°éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹åŒ…body-parser

å…ˆè¦å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼šnpm install body-parser --save

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220604.png" alt="image-20201021193807938" style="zoom:80%;" />

`postè¯·æ±‚çš„æ•°æ®åº“æ“ä½œï¼Œä¼šè¿”å›ä¸€ä¸ªpromise,æˆ‘ä»¬å¿…é¡»æ¥æ”¶è¿™ä¸ªpromise,å¹¶ä¸”è¿”å›åˆ°æµè§ˆå™¨ï¼Œä¾‹å¦‚`

åå°ï¼š

```
     // !æ–°å»ºç”¨æˆ·
     source.post('/create', async (req, res) => {
       //!æ•°æ®åº“æ“ä½œæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªpromise
       const model = await adminModel.create(req.body)
       res.send(model)
     })
```

å‰ç«¯ï¼š

```
      methods: {
         async onSubmit() {
           await this.$http.post('/create', this.form)
           //antdvå…¨å±€æç¤º
           message.success('æ·»åŠ æˆåŠŸ')
         },
       },
```

`å¦‚æœä¸æŠŠæ•°æ®åº“æ“ä½œå‡½æ•°è¿”å›çš„promiseæ¥æ”¶å¹¶è¿”å›ï¼Œé‚£ä¹ˆå‰ç«¯å°±æ— æ³•ä½¿ç”¨async awaitæ¥æ§åˆ¶å¼‚æ­¥ï¼Œå®ç°åŒæ­¥`

body-parseråœ¨2019å¹´è¢«expresså¼ƒç”¨ï¼Œè€Œæ˜¯ç›´æ¥å†…ç½®åˆ°expressçš„æ–¹æ³•ä¸Šäº†ï¼Œå…·ä½“ç”¨æ³•ï¼š

```
     app.use(express.json())   //è¿™ä¸ªä¸å†™ä¹Ÿè¡Œ
     app.use(express.urlencoded({ extended: false }))
```

### Expressè·¯ç”±å‚æ•°

![image-20201021194432514](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220608.png)

### é€šç”¨CRUDæ¥å£

ç»å…¸çš„è¯·æ±‚ä¸æ•°æ®åº“è¯»å†™æ˜¯è¿™æ ·çš„ï¼Œ

å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œæ¯”å¦‚è¿™æ ·ä¸€ä¸ªè¯·æ±‚ï¼Œlocalhost/admin/modelï¼Œaxios.get('localhost/admin/model',(req,res)=>{},æƒ³è¦å®ç°è·å–æ•°æ®åº“çš„ä¿¡æ¯ï¼Œ

é‚£ä¹ˆä½¿ç”¨Nodejsä¸‹é¢çš„expressæ¡†æ¶è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨app(appæ˜¯åˆ›å»ºçš„æœåŠ¡å™¨å®ä¾‹).get('/admin/model',(req,res)=>{

â€‹	res.send(model.find())

}),é‚£ä¸Šé¢çš„modelæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯é›†åˆçš„å®ä¾‹éœ€è¦æå‰å¯¼å…¥ï¼Œimport model from '../../model',

å¦‚æœæˆ‘æƒ³æŸ¥çœ‹æ•°æ®åº“é›†åˆmodel2çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±å¾—å¯¼å…¥model2,åŠ å…¥æœ‰ä¸€ç™¾ä¸ªå°±è¦æ‰‹åŠ¨å¯¼å…¥100ä¸ªï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è‡ªåŠ¨å¯¼å…¥å‘¢ï¼Ÿ

æœ‰çš„ï¼Œé‚£å°±æ˜¯crudé€šç”¨æ¥å£ï¼Œçœ‹èµ·æ¥å¾ˆé«˜å¤§ä¸Šï¼Œå…¶å®éå¸¸ç®€å•ã€‚

crudå¯ä»¥åŠ¨æ€å¯¼å…¥é›†åˆè§„åˆ™ï¼Œä¸»è¦æ€è·¯å°±æ˜¯åˆ©ç”¨ä¸­é—´ä»¶useå’Œè·¯ç”±åŠ¨æ€å‚æ•°ï¼Œ

![image-20201025113552493](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220612.png)

adminæ˜¯è·¯ç”±ï¼Œ

å‡è®¾è¯·æ±‚è·¯å¾„æ˜¯/admin/api/rest/category,é‚£ä¹ˆå°±ä¼šæœ‰å‚æ•°resource=category,ä¹Ÿå°±æ˜¯

console.log(res),æ˜¯{resource:category},

ä½†æ˜¯è¿™ä¸ªå‚æ•°å¹¶ä¸ä¼šç„¶ä¸‹ä¸€çº§è·¯ç”±æ•è·åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åŠ ä¸Š

![image-20201025114101414](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220615.png)

åœ¨ä¸‹ä¸€çº§è·¯ç”±ä¸­åŠ ä¸Šè¿™ä¸€å¥ï¼Œçˆ¶çº§å‚æ•°å°±ä¼šåˆå¹¶åˆ°å­çº§è·¯ç”±ä¸­äº†

è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åŠ¨æ€è·å–é›†åˆè§„åˆ™äº†

```
     admin.get('/', async (req, res) => {
       const Model = require(`../../models/$req.params.resource}`)
       const items = await Model.find()
       res.send(items)
     })
```

å¦‚æœä¸‹æ¬¡éœ€è¦æŸ¥æ‰¾heroé›†åˆçš„æ•°æ®ï¼Œä¹Ÿä¸éœ€è¦é‡æ–°å¯¼å…¥å’Œè®¾ç½®å¯¹åº”çš„è·¯ç”±äº†ï¼Œç›´æ¥ä½¿ç”¨

/admin/api/rest/heroå°±è¡Œäº†

ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¯·æ±‚ä¸€èˆ¬æ˜¯é¦–å­—æ¯å°å†™ï¼Œå¤æ•°å½¢å¼çš„è¯·æ±‚ï¼Œè€Œé›†åˆè§„åˆ™ä¸€èˆ¬æ˜¯é¦–å­—æ¯å¤§å†™å•æ•°å½¢å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è½¬æ¢ä¸€ä¸‹ï¼Œ

![image-20201025115245064](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220619.png)

åˆ©ç”¨è¿™ä¸ªæ’ä»¶å®ƒå¯ä»¥å¸®æˆ‘ä»¬æŠŠcategoriesè½¬æ¢ä¸ºCategory

![image-20201025115326062](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220622.png)

### é™æ€èµ„æºçš„å¤„ç†

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220625.png" alt="image-20201021200629003" style="zoom:80%;" />

å®ä¾‹ï¼š

![image-20201021200757521](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220628.png)

è¾“å…¥ä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®é™æ€èµ„æºçš„è·¯å¾„è®¿é—®é™æ€èµ„æºäº†ï¼Œä¸Šé¢åªèƒ½è®¿é—®publicä¸‹çš„é™æ€èµ„æºï¼Œ

æ¯”å¦‚æƒ³è®¿é—®publicä¸‹imgä¸­çš„1.jpgå°±å¯ä»¥è¿™æ ·è®¿é—®ï¼šlocalhostï¼š3000/img/1.jpg

staticä¸­çš„è·¯å¾„å…·ä½“çœ‹é™æ€èµ„æºä½äºå“ªé‡Œ

### æ–‡ä»¶ä¸Šä¼ 

å‰ç«¯æœ€åŸºç¡€ä¸Šä¼ é¡µé¢

```
      <form
           method="post"
           enctype="multipart/form-data"
           action="http://localhost:3005/admin/api/uploads"
        >
         <input type="file" name="file" />
         <input type="submit" name="ä¸Šä¼ " />
         </form>
```

åç«¯å¤„ç†

ç¬¬ä¸€æ­¥ï¼šå»ºç«‹å¯¹åº”çš„è·¯ç”±å¤„ç†è¯·æ±‚

```
     let upload = require('./routes/admin/upload.js')//è¿™æ˜¯ä¸­é—´è·¯ç”±ï¼Œå…·ä½“ä»£ç ä¸‹é¢çœ‹
     app.use('/admin/api/uploads', upload)
```

ç¬¬äºŒæ­¥ï¼šé…ç½®è¯·æ±‚å¤„ç†

æˆ‘ä»¬é¦–å…ˆè¦ä¸‹è½½ä¸€ä¸ªæ’ä»¶ï¼šmulter

Multer æ˜¯ä¸€ä¸ª node.js ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç† `multipart/form-data` ç±»å‹çš„è¡¨å•æ•°æ®ï¼Œå®ƒä¸»è¦ç”¨äºä¸Šä¼ æ–‡ä»¶ã€‚å®ƒæ˜¯å†™åœ¨ [busboy](https://github.com/mscdex/busboy) ä¹‹ä¸Šéå¸¸é«˜æ•ˆã€‚

æ³¨æ„: Multer ä¸ä¼šå¤„ç†ä»»ä½•é `multipart/form-data` ç±»å‹çš„è¡¨å•æ•°æ®ã€‚

```
	npm i multer --save
```

æ¥ä¸‹æ¥åœ¨è·¯ç”±æ–‡ä»¶upload.jsä¸­é…ç½®

```
	const express = require('express')
     const upload = express.Router()//å®šä¹‰ä¸­é—´è·¯ç”±
     const multer = require('multer')
     const path = require('path')
     const fs = require('fs')
     //destå‚æ•°çš„ä½œç”¨æ˜¯å®šä¹‰è¯¥è¯·æ±‚ä¸Šä¼ çš„æ–‡ä»¶çš„å‚¨å­˜è·¯å¾„
     const uploads = multer({
       dest: __dirname + '/../../uploads',
     })
     //uploads.single('file')æ„æ€æ˜¯å¤„ç†ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸”å‰ç«¯nameå®šä¹‰ä¸ºfile, <input type="file" name="file" />,å‚æ•°å¿…é¡»å’Œè¿™ä¸ªä¸€è‡´ï¼Œä¸ç„¶æŠ¥é”™
     upload.post('/', uploads.single('file'), async (req, res) => {
     //å®šä¹‰è¿”å›çš„url,å› ä¸ºè¿™ä¸ªæ–‡ä»¶æ˜¯å­˜åˆ°uploadsæ–‡ä»¶å¤¹ä¸Šé¢çš„ï¼Œè€Œä¸æ˜¯æ•°æ®åº“ï¼Œæ‰€ä»¥ä¸Šä¼ å®Œæ¯•å¾—æŠŠè¿™ä¸ªè·¯å¾„è¿”å›ç»™æµè§ˆå™¨ï¼Œè®©å®ƒå†æ¬¡ä¸Šä¼ ç»™æ•°æ®åº“ï¼Œæµè§ˆå™¨é€šè¿‡æ•°æ®åº“è·å–æœåŠ¡å™¨æ–‡ä»¶åœ°å€
     //req.fileæ˜¯unloadså¤„ç†çš„ï¼Œæ‰€ä»¥å®ƒæ˜¯æœ‰å€¼çš„
       const file = req.file
       file.url = `http://localhost:3005/uploads/${file.filename}.${
         file.originalname.split('.')[1]
       }`
       //ç”±äºè¿™ä¸ªæ’ä»¶ä¼šé»˜è®¤æŠŠæ–‡ä»¶åå¤„ç†äº†ï¼Œè€Œä¸”ä¸ä¿ç•™æ–‡ä»¶åç¼€ï¼Œä¸‹é¢æ˜¯é€šè¿‡ç³»ç»Ÿfsæ¨¡å—ï¼ŒæŠŠmulteré»˜è®¤ç”Ÿæˆçš„æ–‡ä»¶åŠ ä¸Šåç¼€å
       fs.rename(
         file.path,
         path.join(
           __dirname +
             '../../../uploads/' +
             file.filename +
             '.' +
             file.originalname.split('.')[1]
         ),
         function (err) {
           if (err) console.log('error:' + err)
         }
       )
       //è¿”å›è¯¥æ–‡ä»¶ä¸Šä¼ åœ¨çš„æœåŠ¡å™¨åœ°å€ï¼Œæµè§ˆå™¨å¯ä»¥é€šè¿‡è¯¥åœ°å€è®¿é—®
       res.send(file.url)
     })
     module.exports = upload
```

è‹¥æƒ³å¤„ç†å¤šæ–‡ä»¶ï¼Œåˆ™é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

```
//å¤šä¸ªæ–‡ä»¶ä¸Šä¼ 
router.post('/multer', upload.array('file'), (req, res) => {
    	console.log(file)
    	res.send(file)
    });

```



### æ–‡ä»¶ä¸‹è½½

```
app.use('/download', (req, res) => {
  req.query.file
    ? res.download(`uploads/imgs/${req.query.file}`)
    : res.send('ä¸‹è½½å¤±è´¥')
})
```

### ç™»å½•

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210315222838.png" alt="image-20210315222838030" style="zoom:67%;" />

1ã€ç™»å½•é¡µé¢åˆ›å»º

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220635.png" alt="image-20201107185753582" style="zoom: 67%;" />

2ã€å‘é€ç½‘ç»œè¯·æ±‚

â€‹	å‰ç«¯ä»£ç å¦‚ä¸‹ï¼š
â€‹			login.vue:

```
     <template>
       <div style="background:#ECECEC; padding:50px" class="LoginCard">
         <a-card title="ç™»å½•/æ³¨å†Œ" :bordered="false" class="card" :hoverable="true">
           <a-form-model
             class="cardForm"
             layout="vertical"
             :wrapper-col="{ span: 24 }"
           >
             <a-form-model-item label="ç”¨æˆ·å">
               <a-input size="large" v-model.trim="model.username" />
             </a-form-model-item>
             <a-form-model-item label="å¯†ç ">
               <a-input
                 type="password"
                 size="large"
                 v-model.trim="model.password"
                 @pressEnter="login"
               />
             </a-form-model-item>

             <a-form-model-item class="formBtn">
               <a-space :size="80">
                 <a-button size="large" @click="register">æ³¨å†Œ</a-button>
                 <a-button type="primary" size="large" @click="login">ç™»å½•</a-button>
               </a-space>
             </a-form-model-item>
           </a-form-model>
         </a-card>
       </div>
     </template>
     <script>
     import { message } from 'ant-design-vue'
     export default {
       name: 'Login',
       data() {
         return {
           model: {
             username: '',
             password: '',
           },
         }
       },
       methods: {
         register() {
           this.$router.replace('/createAdmin')
         },
         async login() {
           const res = await this.$http.post('login', this.model)
           localStorage.token = res.data.token
           message.success('ç™»å½•æˆåŠŸ')
           this.$router.push('/')
         },
       },
     }
     </script>
     <style scoped>
     .LoginCard {
       width: 100%;
       height: 100vh;
     }
     .card {
       margin: 130px auto;
       width: 600px;
       height: 350px;
     }
     .card .cardForm {
       margin: 0 auto;
     }
     </style>
     <style>
     .card .ant-card-head-title {
       font-weight: 800;
       font-size: 18px;
     }
     .card .ant-card-body {
       padding: 24px 70px;
     }
     .card .ant-form-item-label label {
       font-weight: 500;
       font-size: 16px;
     }
     .cardForm {
       /* margin: 0 auto;
       text-align: center !important; */
     }
     .cardForm .ant-form-item {
       /* text-align: center; */
       margin-bottom: 20px;
     }
     .formBtn .ant-form-item-control-wrapper {
       /* margin-top: 10px; */
       position: absolute;
       left: 50%;
       transform: translateX(-50%);
       text-align: center;
     }
     </style>

```

å½“è´¦å·å¯†ç æ­£ç¡®æ—¶ï¼Œæ¥æ”¶åç«¯ç›¸åº”çš„token,å¹¶ä¸”å‚¨å­˜åœ¨localstorgeä¸­

networkæ–‡ä»¶å¤¹ä¸­çš„index.js

â€‹	import axios from 'axios'
â€‹     import Vue from 'vue'
â€‹     import router from '../router/index'
â€‹     const http = axios.create({
â€‹       baseURL: 'http://localhost:3000/api/admin',
â€‹       // methods: 'get',
â€‹     })
â€‹     //axiosè¯·æ±‚æ‹¦æˆªå™¨
â€‹     http.interceptors.request.use(
â€‹       (config) => {
â€‹         //è¯·æ±‚å¤´åŠ ä¸Štoken
â€‹         if (localStorage.token) {
â€‹           config.headers.Authorization = localStorage.token
â€‹         }
â€‹         return config
â€‹       },
â€‹       (err) => {
â€‹         return Promise.reject(err)
â€‹       }
â€‹     )
â€‹     // axioså“åº”æ‹¦æˆªå™¨
â€‹     http.interceptors.response.use(
â€‹       (res) => {
â€‹         // const token = req.header.authorization

â€‹         return res
â€‹       },
â€‹       // å½“å“åº”æ•°æ®ä¸­çš„Status Codeå¤§äº400ï¼Œæˆ–è€…è¿”å›é”™è¯¯çš„çŠ¶æ€ç å°±ä¼šè¿›å…¥åˆ°è¿™é‡Œ
â€‹       (err) => {
â€‹         Vue.prototype.$message.error(err.response.data.message)
â€‹         if (err.response.status === 401) {
â€‹           router.push('/Login')
â€‹         }
â€‹         return Promise.reject(err)
â€‹       }
â€‹     )
â€‹     export default http



ä½¿ç”¨è·¯ç”±å¯¼èˆªå®ˆå«ç¦æ­¢åœ¨æœªç™»å½•çŠ¶æ€ï¼ˆæ— token)è¿›å…¥å…¶ä»–é¡µé¢

routeræ–‡ä»¶å¤¹çš„index.js

```
     import Vue from 'vue'
     import VueRouter from 'vue-router'
     import createAdmin from '../views/main/childComs/user/createAdmin.vue'
     import manage from '../views/main/childComs/user/manage.vue'
     import editUser from '../components/content/editUser.vue'
     import Login from '../views/login/Login.vue'
     import Layout from '../views/main/layout.vue'
     Vue.use(VueRouter)
     const routes = [
       {
         path: '/',
         component: Layout,
         children: [
           {
             path: '',
             redirect: '/manage',
           },
           {
             path: '/createAdmin',
             name: 'createAdmin',
             component: createAdmin,
           },
           {
             path: '/manage',
             component: manage,
           },
           {
             path: '/manage/editUser',
             component: editUser,
           },
         ],
       },
       {
         path: '/login',
         component: Login,
       },
     ]
     const router = new VueRouter({
       mode: 'history',
       base: process.env.BASE_URL,
       routes,
     })
     router.beforeEach((to, from, next) => {
       if (to.path === '/Login') {
         next()
       } else {
         let token = localStorage.token
         if (!token) {
           next('/Login')
         } else {
           next()
         }
       }
     })
     export default router
```

åç«¯ç¬¬ä¸€æ­¥ï¼š

ä¸‹è½½ï¼šnpm i jsonwebtoken

å¤„ç†ç™»å½•

ç¬¬äºŒæ­¥ï¼Œæ£€æŸ¥tokenæ˜¯å¦å­˜åœ¨ï¼Œå¦åˆ™ä¸å¤„ç†

```
    const express = require('express')
     const bodyParser = require('body-parser')
     const jwt = require('jsonwebtoken')
     const path = require('path')
     const User = require('./models/createUser')
     const assert = require('http-assert')
     //åˆ›å»ºç½‘ç«™æœåŠ¡å™¨
     const app = express()
     //å…è®¸è·¨åŸŸ
     app.use(require('cors')())
     //å¤„ç†postå‚æ•°
     // app.use(express.json())
     // !å¤„ç†x-www-form-urlencoded
     app.use(bodyParser.urlencoded({ extended: true }))
     // !å¤„ç†json
     app.use(bodyParser.json())
     app.set('select', '232132jsadjsadkj')
     require('./plugins/mongoose')
     //ç™»å½•
     app.use('/api/admin/login', async (req, res, next) => {
       const { username, password } = req.body
       //1ã€æ ¹æ®ç”¨æˆ·åæ‰¾ç”¨æˆ·
       const adminUser = require('./models/createUser')
       const user = await adminUser.findOne({
         username,
       })
       // assert(user, 422, 'ç”¨æˆ·ä¸å­˜åœ¨')
       if (!user) {
         return res.status(422).send({
           message: 'ç”¨æˆ·ä¸å­˜åœ¨',
         })
       }
       // 2ã€æ ¡éªŒå¯†ç 
       const isValid = require('bcrypt').compareSync(password, user.password)
       if (!isValid) {
         return res.status(400).send({
           message: 'å¯†ç é”™è¯¯',
         })
       }
       //3ã€è¿”å›token
       const jwt = require('jsonwebtoken')
       const token = jwt.sign({ id: user._id }, app.get('select'))
       return res.send({ token })
     })
     app.use(async (req, res, next) => {
       const token = req.headers.authorization
       if (!token) {
         return res.status(401).send({
           message: 'è¯·å…ˆç™»å½•',
         })
       }
       const { id } = jwt.verify(token, app.get('select'))
       req.user = await User.findById(id)
       if (!req.user) {
         return res.status(401).send({
           message: 'è¯·å…ˆç™»å½•',
         })
       }
       next()
     })
     //å®ç°é™æ€èµ„æºè®¿é—®åŠŸèƒ½
     app.use('/uploads', express.static(path.join(__dirname + '/uploads')))
     //è°ƒç”¨è·¯ç”±ï¼Œå¤„ç†è¯·æ±‚
     let upload = require('./routes/upload')
     let source = require('./routes/source')
     let user = require('./routes/user')
     app.use('/api/admin/uploads', upload)
     app.use('/create', source)
     app.use('/api/admin', user)
     //ä¸‹è½½æ–‡ä»¶
     app.use('/download', (req, res) => {
       req.query.file
         ? res.download(`uploads/imgs/${req.query.file}`)
         : res.send('å¤±è´¥')
       // res.send(req.query.file)
       // console.log(req.query)
     })

     //ç›‘å¬ç«¯å£
     app.listen(3000)
     console.log('æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ')
     console.log('è¯·è®¿é—®http://localhost:3000')
     user.password
```

å› ä¸ºå¯†ç æ˜¯é€šè¿‡åŠ å¯†çš„ï¼Œæ‰€ä»¥éœ€è¦è§£å¯†ï¼Œä¸Šé¢æœ‰å†™ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸‹è´¦å·å¯†ç çš„æ•°æ®åº“model

modelsæ–‡ä»¶å¤¹ä¸‹çš„createUser

```
     const mongoose = require('mongoose')
     const schema = new mongoose.Schema({
       username: { type: String, required: true },
       password: {
         type: String,
         select: false, //å½“selectä¸ºfalseæ—¶ï¼Œpasswordä¸ä¼šè¢«æŸ¥è¯¢å‡ºæ¥
         required: true,
         set(val) {
           return require('bcrypt').hashSync(val, 10)//åŠ å¯†ï¼Œvalæ˜¯passwordåŸæ¥çš„å€¼
         },
       },
     })
     module.exports = mongoose.model('User', schema)

```

## Koa2æ¡†æ¶

### ç®€ä»‹

> Koa æ˜¯ä¸€ä¸ªæ–°çš„ web æ¡†æ¶ï¼Œç”± Express å¹•åçš„åŸç­äººé©¬æ‰“é€ ï¼Œ è‡´åŠ›äºæˆä¸º web åº”ç”¨å’Œ API å¼€å‘é¢†åŸŸä¸­çš„ä¸€ä¸ªæ›´å°ã€æ›´å¯Œæœ‰è¡¨ç°åŠ›ã€æ›´å¥å£®çš„åŸºçŸ³ã€‚ é€šè¿‡åˆ©ç”¨ async å‡½æ•°ï¼ŒKoa å¸®ä½ ä¸¢å¼ƒå›è°ƒå‡½æ•°ï¼Œå¹¶æœ‰åŠ›åœ°å¢å¼ºé”™è¯¯å¤„ç†ã€‚ Koa å¹¶æ²¡æœ‰æ†ç»‘ä»»ä½•ä¸­é—´ä»¶ï¼Œ è€Œæ˜¯æä¾›äº†ä¸€å¥—ä¼˜é›…çš„æ–¹æ³•ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿè€Œæ„‰å¿«åœ°ç¼–å†™æœåŠ¡ç«¯åº”ç”¨ç¨‹åºã€‚

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220643.png" alt="image-20201115005604441" style="zoom: 50%;" />

### Koa2å¿«é€Ÿä¸Šæ‰‹

- **æ£€æŸ¥Nodeçš„ç¯å¢ƒ**

  node -v(è¦æ±‚7.6.2ä»¥ä¸Š)

- **å®‰è£…Koa**

  npm init -y   //åˆå§‹åŒ–package.json

  npm install koa

- åˆ›å»ºå¹¶ç¼–å†™app.jsæ–‡ä»¶

  1ã€åˆ›å»ºkoaå¯¹è±¡

  2ã€ç¼–å†™å“åº”å‡½æ•°ï¼ˆä¸­é—´ä»¶ï¼‰

  3ã€ç›‘å¬ç«¯å£

- å¯åŠ¨æœåŠ¡å™¨

  node app.jsæˆ–è€…nodemon app.js

å®ä¾‹ï¼š

```
//1ã€åˆ›å»ºkoaå¯¹è±¡
const Koa = require('koa')
const app = new Koa()
//2ã€ç¼–å†™å“åº”å‡½æ•°ï¼ˆä¸­é—´ä»¶ï¼‰
//ctx:ä¸Šä¸‹æ–‡ï¼Œwebå®¹å™¨ï¼Œctx.request ctx.response
//next:ä¸‹ä¸€ä¸ªä¸­é—´ä»¶,ä¸‹ä¸€å±‚ä¸­é—´ä»¶æ˜¯å¦èƒ½å¤Ÿå¾—åˆ°æ‰§è¡Œï¼Œå–å†³äºnextè¿™ä¸ªå‡½æ•°æœ‰æ²¡æœ‰è¢«è°ƒç”¨
app.use((ctx, next) => {
  console.log(ctx.request.url)
  ctx.response.body = 'hello world'
})
//3ã€ç»‘å®šç«¯å£å·app.listen(3000)
app.listen(3000)
```



<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220648.png" alt="image-20201115021048930" style="zoom:50%;" />

è‡ªç ”æ¡†æ¶

# Mongodb

## ä»€ä¹ˆæ˜¯æ•°æ®åº“ï¼Ÿ

æ•°æ®åº“å³å­˜å‚¨æ•°æ®çš„ä»“åº“ï¼Œå¯ä»¥å°†æ•°æ®è¿›è¡Œæœ‰åºçš„æ„¤æ‡‘åˆ«ç±»çš„å­˜å‚¨ã€‚å®ƒæ˜¯ç‹¬ç«‹äºè¯­è¨€ä¹‹å¤–çš„è½¯ä»¶ï¼Œå¯ä»¥é€šè¿‡APIå»æ“ä½œå®ƒã€‚

å¸¸è§çš„æ•°æ®åº“è½¯ä»¶æœ‰ï¼šmysqlã€mongoDBã€oracle

![image-20201018095853836](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220652.png)

## æ•°æ®åº“ç›¸å…³æ¦‚å¿µ

åœ¨ä¸€ä¸ªæ•°æ®åº“è½¯ä»¶ä¸­å¯ä»¥åŒ…å«å¤šä¸ªæ•°æ®ä»“åº“ï¼Œåœ¨æ¯ä¸ªæ•°æ®ä»“åº“ä¸­å¯ä»¥åŒ…å«å¤šä¸ªæ•°æ®é›†åˆï¼Œæ¯ä¸ªæ•°æ®é›†åˆä¸­å¯ä»¥åŒ…å«å¤šæ¡æ–‡æ¡£ï¼ˆå…·ä½“çš„æ•°æ®ï¼‰

![image-20201018100750764](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220655.png)

## è¿æ¥æ•°æ®åº“

åˆ©ç”¨mongooseè¿æ¥æ•°æ®åº“

è¿æ¥æ•°æ®åº“å‰è¦å…ˆå®‰è£…mongoose

```
	npm install mongoose --save
```

```
	//å¼•å…¥mongooseç¬¬ä¸‰æ–¹æ¨¡å—
     const mongoose = require('mongoose')
     //è¿æ¥æ•°æ®åº“
     mongoose
       .connect('mongodb://localhost/blog', { useNewUrlParser: trueï¼ŒuseUnifiedTopology: true })
       .then(() => {
         console.log('æ•°æ®åº“è¿æ¥æˆåŠŸ')
       })
       .catch(() => {
         console.log('æ•°æ®åº“è¿æ¥å¤±è´¥') 
       })
```

`blogæ˜¯æ•°æ®åº“åï¼Œå¦‚æœæ²¡æœ‰è¯¥æ•°æ®åº“ï¼Œåˆ™ä¼šåœ¨å¢åŠ æ•°æ®æ—¶è‡ªåŠ¨åˆ›å»ºè¯¥æ•°æ®åº“ï¼Œ{ useNewUrlParser: trueï¼ŒuseUnifiedTopology: true }ï¼Œè¿™å¥è¯çš„`

`ä½œç”¨æ˜¯ä¸ºäº†é˜²æ­¢è­¦å‘Šï¼Œå»æ‰ä¹Ÿæ— æ‰€è°“ï¼Œä¸è¿‡åº”å°½é‡ä¿ç•™`ï¼Œå½“è¿æ¥ä¸Šè¿™ä¸ªæ•°æ®åº“ï¼Œåˆ›å»ºçš„é›†åˆéƒ½ä¼šæŒ‚è½½åœ¨è¿™ä¸ªæ•°æ®åº“

åœ¨app.jsä¸­è¾“å…¥ï¼š

```
     //è¿æ¥æ•°æ®åº“
     //ä¸Šé¢ä»£ç æ–‡ä»¶çš„ç›®å½•
     require('./plugins/db')
```

**å’Œæ•°æ®åº“æ“ä½œç›¸å…³çš„éƒ½æ˜¯å¼‚æ­¥æ“ä½œ**

mongodbæä¾›çš„apiæ”¯æŒPromiseï¼Œä¹Ÿå°±æ˜¯è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡

## å¢

1. åˆ›å»ºæ•°æ®åº“

   åœ¨MongoDBä¸éœ€è¦æ˜¾ç¤ºåˆ›å»ºæ•°æ®åº“ï¼Œå¦‚æœæ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“ä¸å­˜åœ¨ï¼ŒMongoDBä¼šè‡ªåŠ¨åˆ›å»º

2. åˆ›å»ºé›†åˆ

   åˆ›å»ºé›†åˆåˆ†ä¸ºä¸¤æ­¥ï¼Œä¸€æ˜¯å¯¹é›†åˆè®¾å®šè§„åˆ™ï¼ŒäºŒæ˜¯åˆ›å»ºé›†åˆï¼Œåˆ›å»ºmongoose.Schemaæ„é€ å‡½æ•°çš„å®ä¾‹å³å¯åˆ›å»ºé›†åˆã€‚

   ```
   //è®¾å®šé›†åˆè§„åˆ™
   const courseSchema=new mongoose.Schema({
   	name:String,
   	author:{
             type:String,
             required:true,//å¿…é¡»ä¼ 
             select:false//æŸ¥è¯¢æ—¶å¿½ç•¥è¿™ä¸ª
   	},
   	isPublished:Boolean
   });
   //åˆ›å»ºé›†åˆå¹¶åº”ç”¨è§„åˆ™
   //1ã€é›†åˆåç§°
   //2ã€é›†åˆè§„åˆ™
   const Course=mongoose.model('Course',courseSchema);//courses
   ```

   å¦‚æœä¼ çš„æ•°æ®æœ‰å¤šä¸ªï¼Œå¯ä»¥å†™æˆæ•°ç»„çš„å½¢å¼ï¼Œæ¯”å¦‚

   ```
   const schema = new mongoose.Schema({
     parent: [
       {
         type: mongoose.SchemaTypes.ObjectId,
         ref: 'Category',
       },
     ],
   })
   ```

3. åˆ›å»ºæ–‡æ¡£ï¼ˆæ–¹æ³•ä¸€ï¼‰

   åˆ›å»ºæ–‡æ¡£å®é™…ä¸Šå°±æ˜¯å‘é›†åˆä¸­æ’å…¥æ•°æ®ã€‚

   åˆ†ä¸ºä¸¤æ­¥ï¼š

   1. åˆ›å»ºé›†åˆå®ä¾‹ã€‚

   2. è°ƒç”¨å®ä¾‹å¯¹è±¡ä¸‹çš„saveæ–¹æ³•å°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¸­

      ```
      //åˆ›å»ºæ–‡æ¡£å®ä¾‹
      const course=new Course({
      	name:'webpon',
      	author:'webpon',
      	isPublished:false
      })
      //å°†åˆ›å»ºçš„æ–‡æ¡£å®ä¾‹æ’å…¥åˆ°æ•°æ®åº“ä¸­
      course.save();
      ```

`åˆ›å»ºæ–‡æ¡£å®ä¾‹å¹¶ä¸ä¸€å®šè¦å’Œé›†åˆè§„åˆ™ä¸€ä¸€å¯¹åº”ï¼Œå¦‚æœè§„åˆ™æœ‰è€Œæ–‡æ¡£å®ä¾‹æ²¡æœ‰çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šçœç•¥è¿™ä¸ªè§„åˆ™ï¼Œ`æ¯”å¦‚ï¼š

```
			//åˆ›å»ºæ–‡æ¡£å®ä¾‹
               const course=new Course({
                    name:'webpon',
                    author:'webpon',
                    //isPublished:false
               })
               //å°†åˆ›å»ºçš„æ–‡æ¡£å®ä¾‹æ’å…¥åˆ°æ•°æ®åº“ä¸­
               course.save();
```

`è™½ç„¶é›†åˆè§„åˆ™æœ‰isPublished,ä½†æ˜¯å¹¶æ²¡æœ‰è§„å®šæ˜¯å¿…é¡»çš„ï¼Œå½“æ²¡æœ‰ä¼ å…¥æ—¶å°±ä¼šçœç•¥è¿™ä¸ªå­—æ®µï¼Œæ•°æ®åº“é‡Œé¢å°±ä¸æ˜¾ç¤ºè¿™ä¸ªå­—æ®µ`

`å½“ç„¶ï¼Œå¦‚æœå®ä¾‹æ–‡æ¡£ä¸­æœ‰ä¸€äº›å±æ€§æ˜¯é›†åˆè§„åˆ™æ²¡æœ‰çš„ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¼šå†™å…¥åˆ°æ•°æ®åº“ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯çœç•¥`

4ã€åˆ›å»ºæ–‡æ¡£ï¼ˆæ–¹æ³•äºŒ)

```
		//å‘é›†åˆä¸­æ’å…¥æ–‡æ¡£
		Course.create({ name: 'java', author:'webpon',isPublished:false })
            .then((doc) => {
              console.log(doc)
            })
            .catch((err) => {
              console.log(err)
            })
```

â€‹	5ã€å¯¼å…¥å·²å­˜åœ¨çš„æ•°æ®åº“é›†åˆ

â€‹		ä½¿ç”¨mongoimport å¯¼å…¥å·²å­˜åœ¨çš„æ•°æ®åº“é›†åˆï¼ˆéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼‰

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220702.png" alt="image-20201018113126237" style="zoom:67%;" />

â€‹		å¯¼å…¥çš„éœ€è¦æ˜¯jsonæ ¼å¼

```
		mongoimport -d æ•°æ®åº“å -c é›†åˆå --file ./user.json
```

â€‹			å¯¼å…¥çš„é›†åˆæ ¼å¼

â€‹		<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220705.png" alt="image-20201018113023993" style="zoom:67%;" />





## åˆ 

![image-20201022085116503](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220711.png)

**findOneAndDelete()æ–¹æ³•æ˜¯åˆ é™¤ä¸€æ¡æ–‡æ¡£**ï¼Œå‚æ•°ä¸­ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…åŒ¹é…æ¡ä»¶

ä¸Šé¢ä¼šåŒ¹é…åˆ°æ‰€æœ‰æ–‡æ¡£ï¼Œå› ä¸ºé™åˆ¶æ¡ä»¶ä¸ºç©ºå¯¹è±¡ï¼Œå½“æ—¶åªä¼šåˆ é™¤åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªæ–‡æ¡£

æ¯”å¦‚Course.findOneAndDelete({name:'å¼ ä¸‰'})ï¼Œè¿™ä¸ªè¯­å¥å°±æ˜¯åˆ é™¤nameä¸ºå¼ ä¸‰çš„ç¬¬ä¸€ä¸ªæ–‡æ¡£ï¼ˆå¦‚æœæœ‰å¤šæ¡ä¹Ÿæ˜¯åˆ é™¤åŒ¹é…åˆ°çš„ç¬¬ä¸€æ¡æ–‡æ¡£ï¼‰ï¼Œå¹¶ä¸”ä¼šè¿”å›	  è¢«åˆ é™¤çš„æ–‡æ¡£

![image-20201022085610122](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220713.png)

**åˆ é™¤åŒ¹é…åˆ°çš„æ‰€æœ‰æ–‡æ¡£**ï¼Œä¸Šé¢ä¼šåŒ¹é…åˆ°æ‰€æœ‰æ–‡æ¡£ï¼Œå› ä¸ºé™åˆ¶æ¡ä»¶ä¸ºç©ºå¯¹è±¡ï¼Œè¿™æ ·å°±ä¼šåˆ é™¤æ‰€æœ‰æ–‡æ¡£

## æ”¹

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220717.png" alt="image-20201022090045356" style="zoom:80%;" />

**æ›´æ–°ä¸€ä¸ªæ–‡æ¡£ï¼Œè¿”å›ç»“æœæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå¯¹è±¡åŒ…å«æ˜¯å¦æ›´æ–°æˆåŠŸçš„ä¿¡æ¯**

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220719.png" alt="image-20201022090306075" style="zoom:67%;" />

ä¸Šé¢è¯­å¥å°±æ˜¯æŠŠnameä¸ºæå››çš„æ–‡æ¡£ä¸­çš„nameè¯¥ä¸ºæç‹—è›‹

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220722.png" alt="image-20201022090328652" style="zoom:80%;" />

æ›´æ–°å¤šä¸ªæ–‡æ¡£

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220725.png" alt="image-20201022090400031" style="zoom: 67%;" />

ä¸Šé¢è¯­å¥å°±æ˜¯æŠŠæ‰€æœ‰æ–‡æ¡£ä¸­çš„ageæ”¹ä¸º56

æ›´æ–°çš„è¯å¯ä»¥å¸¦_id

## æŸ¥

**é›†åˆå.find().then(res=>{}).catch(err=>{})**

![image-20201022082047178](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220729.png)

ä¸Šè¿™ä¸ªè¯­å¥æ˜¯æŸ¥è¯¢Courseï¼ˆå®é™…æ•°æ®åº“ä¸­é›†åˆåç§°ä¸ºcoures)é›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£

**find()ä¸­å¯ä»¥åŠ ä¸Šå‚æ•°ï¼Œå‚æ•°å°±æ˜¯æŸ¥è¯¢æ¡ä»¶ï¼Œ**æ¯”å¦‚ä¸‹é¢è¯­å¥å°±æ˜¯æŸ¥è¯¢Useré›†åˆä¸­_idä¸º'aegshjdsah2323'çš„æ–‡æ¡£

User.find({_id:'aegshjdsah2323'}).then(res=>{})

**fineOneæ–¹æ³•ä¹Ÿæ˜¯æŸ¥è¯¢æ–¹æ³•ï¼Œä½†æ˜¯åªä¼šè¿”å›ä¸€æ¡æ–‡æ¡£ï¼Œå¦‚æœä¸åŠ æŸ¥è¯¢æ¡ä»¶å°±ä¼šè¿”å›é›†åˆä¸­çš„ç¬¬ä¸€æ¡æ•°æ®**

![image-20201022082735098](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220731.png)

findå‡½æ•°ä¸­è¿”å›çš„æ°¸è¿œæ˜¯æ•°ç»„ï¼Œå‚æ•°ä¸­å¯ä»¥å¸¦ä¸ŠæŸ¥è¯¢æ¡ä»¶ï¼Œ`æŸ¥è¯¢æ¡ä»¶çš„æ ¼å¼æ˜¯å¯¹è±¡`

**åŒ¹é…ageå¤§äº20å°äº50çš„æ–‡æ¡£ï¼Œ$gtç›¸å½“äºå¤§äºï¼Œ$ltç›¸å½“äºå°äºDD**

![image-20201022083212594](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220734.png)

**åŒ¹é…æ–‡æ¡£ä¸­hobbieså­—æ®µä¸­åŒ…å«'æ•²ä»£ç 'çš„æ–‡æ¡£ï¼Œ$inè¡¨ç¤ºåŒ…å«**ï¼Œ`å¯ä»¥è¿›è¡ŒæŸ¥è¯¢æœç´¢åŠŸèƒ½`

![image-20201022083544167](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220737.png)

æ¡ä»¶æŸ¥è¯¢ï¼š

> db.student.find(query,projection)
>
> query å¯é€‰ï¼ŒæŸ¥è¯¢æ¡ä»¶
>
> projection å¯é€‰ï¼Œå­—æ®µè¿‡æ»¤ï¼Œé»˜è®¤è¿”å›æ‰€æœ‰å­—æ®µ
>
> å­—æ®µä¸º0ï¼Œä¸ºä¸éœ€è¦è¿”å›
>
> å­—æ®µä¸º1ï¼Œä¸ºéœ€è¦è¿”å›
>
> æŠ•å°„é‡Œ é™¤äº†_idä»¥å¤–ï¼Œè¦ä¹ˆå…¨æ˜¯1ï¼Œè¦ä¹ˆå…¨æ˜¯0ï¼Œå¦åˆ™å°±æŠ¥é”™

```
     db.student.find({'name':'lisi'})
     { "_id" : ObjectId("5b1896db33d2607cbb015971"), "name" : "lisi", "hobby" : "MUSIC" }
     { "_id" : ObjectId("5b1899a333d2607cbb015972"), "name" : "lisi", "age" : 18, "hobby" : "sleep" }
     { "_id" : ObjectId("5b1899b033d2607cbb015973"), "name" : "lisi", "age" : 18, "hobby" : "wangzhe" }
     > db.student.find({'name':'lisi'},{'age':1})
     { "_id" : ObjectId("5b1896db33d2607cbb015971") }
     { "_id" : ObjectId("5b1899a333d2607cbb015972"), "age" : 18 }
     { "_id" : ObjectId("5b1899b033d2607cbb015973"), "age" : 18 }
     > db.student.find({'name':'lisi'},{'age':0})
     { "_id" : ObjectId("5b1896db33d2607cbb015971"), "name" : "lisi", "hobby" : "MUSIC" }
     { "_id" : ObjectId("5b1899a333d2607cbb015972"), "name" : "lisi", "hobby" : "sleep" }
     { "_id" : ObjectId("5b1899b033d2607cbb015973"), "name" : "lisi", "hobby" : "wangzhe" }
     > 
     > db.student.find({'name':'lisi'},{'age':1})
     { "_id" : ObjectId("5b1896db33d2607cbb015971") }
     { "_id" : ObjectId("5b1899a333d2607cbb015972"), "age" : 18 }
     { "_id" : ObjectId("5b1899b033d2607cbb015973"), "age" : 18 }
     > db.student.find({'name':'lisi'},{'age':0})
     { "_id" : ObjectId("5b1896db33d2607cbb015971"), "name" : "lisi", "hobby" : "MUSIC" }
     { "_id" : ObjectId("5b1899a333d2607cbb015972"), "name" : "lisi", "hobby" : "sleep" }
     { "_id" : ObjectId("5b1899b033d2607cbb015973"), "name" : "lisi", "hobby" : "wangzhe" }
     > db.student.find({'name':'lisi'},{'age':0,'hobby':1})
     Error: error: {
         "ok" : 0,
         "errmsg" : "Projection cannot have a mix of inclusion and exclusion.",
         "code" : 2,
         "codeName" : "BadValue"
     }
     > db.student.find({'name':'lisi'},{_id:0})
     { "name" : "lisi", "hobby" : "MUSIC" }
     { "name" : "lisi", "age" : 18, "hobby" : "sleep" }
     { "name" : "lisi", "age" : 18, "hobby" : "wangzhe" }
     > db.student.find({'name':'lisi'},{'age':1})
     { "_id" : ObjectId("5b1896db33d2607cbb015971") }
     { "_id" : ObjectId("5b1899a333d2607cbb015972"), "age" : 18 }
     { "_id" : ObjectId("5b1899b033d2607cbb015973"), "age" : 18 }
     > db.student.find({'name':'lisi'},{'age':1,_id:0})
     {  }
     { "age" : 18 }
     { "age" : 18 }
     > db.student.find({'name':'lisi'},{'age':0,_id:0})
     { "name" : "lisi", "hobby" : "MUSIC" }
     { "name" : "lisi", "hobby" : "sleep" }
     { "name" : "lisi", "hobby" : "wangzhe" }
```



**æ ¹æ®å¹´é¾„è¿›è¡Œå‡åºæ’åˆ—**ï¼Œå¦‚æœæƒ³è¦è¿›è¡Œé™åºæ’åˆ—ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨ageå‰é¢åŠ ä¸Šè´Ÿå·-å°±è¡Œ

![image-20201022084245068](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220740.png)

![image-20201022084502494](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220743.png)

**skip(2)çš„æ„æ€å°±æ˜¯è·³è¿‡ä¸¤æ¡æ–‡æ¡£ï¼Œè·³è¿‡æœ€å‰é¢ä¸¤æ¡æ–‡æ¡£ï¼Œlimit(2)å°±æ˜¯åªæŸ¥è¯¢ä¸¤æ¡æ–‡æ¡£**ï¼Œ`å¯ä»¥è¿›è¡Œåˆ†é¡µåŠŸèƒ½`

![image-20201022084550453](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220746.png)

æ›´å¤šæ“ä½œè¯¦æƒ…è¯·å‰å¾€ï¼šhttps://www.cnblogs.com/gugubeng/p/9714583.html

## mongooseéªŒè¯

åœ¨åˆ›å»ºè§„åˆ™æ—¶ï¼Œå¯ä»¥è®¾ç½®å½“å‰å­—æ®µçš„éªŒè¯è§„åˆ™ï¼ŒéªŒè¯å¤±è´¥åˆ™è¾“å‡ºæ’å…¥å¤±è´¥

- required: true å¿…ä¼ å­—æ®µ
- minlength: 2 å­—ç¬¦ä¸²æœ€å°é•¿åº¦
- maxlength 10 å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦
- min: 10 æ•°å€¼æœ€å°å€¼
- max: 100 æ•°å€¼æœ€å¤§å€¼
- enum: ['html','css','javascript']  æšä¸¾ï¼Œåˆ—å‡ºå½“å‰å¯ä»¥æ‹¥æœ‰çš„å­—æ®µ
- trim: true å»é™¤å­—ç¬¦å‰åä¸¤è¾¹çš„ç©ºæ ¼
- validateï¼š è‡ªå®šä¹‰éªŒè¯å™¨
- default: é»˜è®¤å€¼

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220751.png" alt="image-20201022090952886" style="zoom:80%;" />

æœ‰äº†required:trueï¼Œé‚£ä¹ˆtitleæ˜¯å¿…ä¼ å­—æ®µï¼Œå¦‚æœä¸ä¼ å°±ä¼šæŠ¥é”™

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220754.png" alt="image-20201022091300920" style="zoom:80%;" />

è‡ªå®šä¹‰é”™è¯¯æç¤ºï¼Œå¦‚æœtitleå­—æ®µæ²¡æœ‰ä¼ ï¼Œé‚£ä¹ˆå°±ä¼šæç¤ºé”™è¯¯ï¼šâ€™è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜'

![image-20201022091624367](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220757.png)

**minlength:2è¡¨ç¤ºtitleå­—æ®µä¿¡æ¯é•¿åº¦ä¸èƒ½å°äº2ï¼Œmaxlength:5è¡¨ç¤ºtitleå­—æ®µä¿¡æ¯é•¿åº¦ä¸èƒ½å¤§äº5ï¼Œtrim:trueå°±æ˜¯å»é™¤å­—ç¬¦ä¸²ä¸¤è¾¹çš„ç©ºæ ¼**

![image-20201022092153893](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220800.png)

**Date.nowå°±æ˜¯ç³»ç»Ÿé»˜è®¤æ—¥æœŸæ—¶é—´**

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220806.png" alt="image-20201022092249826" style="zoom:80%;" />

enumå°±æ˜¯è§„å®šcategoryå¯ä»¥ä¼ çš„é€‰é¡¹ï¼Œä¹Ÿå°±æ˜¯html,css,javascript,node.jså¯ä»¥ä¼ ï¼Œå…¶ä»–åˆ™æŠ¥é”™

**è‡ªå®šä¹‰éªŒè¯è§„åˆ™**

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220810.png" alt="image-20201022092740983" style="zoom:80%;" />

væ˜¯ä¼ å…¥çš„ä¿¡æ¯ï¼Œåœ¨å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¿¡æ¯çš„éªŒè¯ï¼Œå¦‚æœè¿”å›å€¼ä¸ºtrueï¼Œåˆ™æŠŠå€¼æ’å…¥æ•°æ®åº“ï¼Œå¦åˆ™æŠ¥é”™

## é›†åˆå…³è”

é€šå¸¸`ä¸åŒé›†åˆçš„æ•°æ®ä¹‹é—´æ˜¯æœ‰å…³ç³»çš„`ï¼Œä¾‹å¦‚æ–‡ç« ä¿¡æ¯å’Œç”¨æˆ·ä¿¡æ¯å­˜å‚¨åœ¨ä¸åŒé›†åˆä¹‹ä¸­ï¼Œä½†æ–‡ç« æ˜¯æŸä¸ªç”¨æˆ·å‘è¡¨çš„ï¼Œè¦æŸ¥è¯¢æ–‡ç« çš„æ‰€æœ‰ä¿¡æ¯åŒ…æ‹¬å‘è¡¨ç”¨æˆ·ï¼Œå°±éœ€è¦ç”¨åˆ°é›†åˆå…³è”ã€‚

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220813.png" alt="image-20201022113225718" style="zoom: 67%;" />



![image-20201022113249884](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210505221916.png)

é›†åˆå…³è”å®ç°

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220815.png" alt="image-20201022113429383" style="zoom:80%;" />

![image-20201022113621689](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220819.png)

ç»è¿‡ä¸Šé¢å®šä¹‰åï¼ŒPostæ’å…¥æ•°æ®æ—¶ï¼Œauthorå­—æ®µå¡«å†™å¯¹åº”Userçš„çœŸå®idå°±èƒ½ä¸ä¹‹å…³è”ï¼Œä½†æ˜¯é»˜è®¤è¾“å‡ºè¿˜æ˜¯æ˜¾ç¤ºid

![image-20201022113930797](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220822.png)

æˆ‘ä»¬å¯ä»¥é€šè¿‡populate(),è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯å»è¯»å–auhorå­—æ®µçš„ä¿¡æ¯ï¼Œç„¶åé€šè¿‡idå»Useré›†åˆæŸ¥è¯¢ï¼Œå¹¶ä¸”æŠŠä¿¡æ¯è¯»å–å‡ºæ¥

![image-20201022113956419](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220825.png)

![image-20201022114005770](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220827.png)

# çˆ¬è™«

## ç®€ä»‹

ç½‘ç»œçˆ¬è™«ï¼ˆåˆç§°ä¸ºç½‘é¡µèœ˜è››ï¼Œç½‘ç»œæœºå™¨äººï¼Œåœ¨[FOAF](https://baike.baidu.com/item/FOAF)ç¤¾åŒºä¸­é—´ï¼Œæ›´ç»å¸¸çš„ç§°ä¸ºç½‘é¡µè¿½é€è€…ï¼‰ï¼Œæ˜¯ä¸€ç§æŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼Œè‡ªåŠ¨åœ°æŠ“å–ä¸‡ç»´ç½‘ä¿¡æ¯çš„[ç¨‹åº](https://baike.baidu.com/item/ç¨‹åº/13831935)æˆ–è€…[è„šæœ¬](https://baike.baidu.com/item/è„šæœ¬/1697005)ã€‚

`çˆ¬è™«çš„æœ¬è´¨æ˜¯ä½¿ç”¨ç½‘ç»œè¯·æ±‚ï¼Œä½¿ç”¨ä»£ç æ§åˆ¶ç½‘ç»œè¯·æ±‚ï¼Œå¹¶ä¸”å¯¹è·å–åˆ°çš„æ•°æ®è¿›è¡Œç­›é€‰å’Œæ•´ç†ï¼Œè·å–åˆ°æˆ‘ä»¬éœ€è¦çš„æ•°æ®`



# Java

## Javaç®€ä»‹

Java æ˜¯ç”± Sun Microsystems å…¬å¸äº 1995 å¹´ 5 æœˆæ¨å‡ºçš„é«˜çº§ç¨‹åºè®¾è®¡è¯­è¨€ã€‚

Java å¯è¿è¡Œäºå¤šä¸ªå¹³å°ï¼Œå¦‚ Windows, Mac OS åŠå…¶ä»–å¤šç§ UNIX ç‰ˆæœ¬çš„ç³»ç»Ÿã€‚

æœ¬æ•™ç¨‹é€šè¿‡ç®€å•çš„å®ä¾‹å°†è®©å¤§å®¶æ›´å¥½çš„äº†è§£ Java ç¼–ç¨‹è¯­è¨€ã€‚

JavaåŸºç¡€æ˜¯å­¦ä¹ JavaEEã€å¤§æ•°æ®ã€Andriodå¼€å‘çš„åŸºçŸ³ï¼

### ä¸‰å¤§ä½“ç³»

Javaåˆ†ä¸ºä¸‰ä¸ªä½“ç³»ï¼Œåˆ†åˆ«ä¸ºJava SEï¼ˆJ2SEï¼ŒJava2 Platform Standard Editionï¼Œæ ‡å‡†ç‰ˆï¼‰ï¼Œ

JavaEEï¼ˆJ2EEï¼ŒJava 2 Platform, Enterprise Editionï¼Œä¼ä¸šç‰ˆï¼‰ï¼Œ

Java MEï¼ˆJ2MEï¼ŒJava 2 Platform Micro Editionï¼Œå¾®å‹ç‰ˆï¼‰ã€‚

JavaSE

å®ƒå…è®¸å¼€å‘å’Œéƒ¨ç½²åœ¨æ¡Œé¢ã€æœåŠ¡å™¨ã€åµŒå…¥å¼ç¯å¢ƒå’Œå®æ—¶ç¯å¢ƒä¸­ä½¿ç”¨çš„ Java åº”ç”¨ç¨‹åºã€‚Java SE åŒ…å«äº†æ”¯æŒ Java Web æœåŠ¡å¼€å‘çš„ç±»ï¼Œå¹¶ä¸º Java 	    	  Platformï¼ŒEnterprise Editionï¼ˆJava EEï¼‰æä¾›åŸºç¡€ã€‚

**JavaEE**

JavaEEæ˜¯åœ¨JavaSEçš„åŸºç¡€ä¸Šæ„å»ºçš„ï¼Œç”¨æ¥å¼€å‘B/Sæ¶æ„è½¯ä»¶ï¼Œä¹Ÿå°±æ˜¯å¼€å‘ä¼ä¸šçº§åº”ç”¨ï¼Œæ‰€ä»¥ç§°ä¸ºä¼ä¸šç‰ˆ
	  å¸®åŠ©å¼€å‘å’Œéƒ¨ç½²å¯ç§»æ¤ã€å¥å£®ã€å¯ä¼¸ç¼©ä¸”å®‰å…¨çš„æœåŠ¡å™¨ç«¯ Java åº”ç”¨ç¨‹åºã€‚Java EE æ˜¯åœ¨ Java SE çš„åŸºç¡€ä¸Šæ„å»ºçš„ï¼Œå®ƒæä¾› Web æœåŠ¡ã€ç»„ä»¶æ¨¡å‹ã€	  ç®¡ç†å’Œé€šä¿¡ APIï¼Œå¯ä»¥ç”¨æ¥å®ç°ä¼ä¸šçº§çš„é¢å‘æœåŠ¡ä½“ç³»ç»“æ„ï¼ˆservice-oriented architectureï¼ŒSOAï¼‰å’Œ Web 2.0 åº”ç”¨ç¨‹åºã€‚

**JavaME**

Java MEä¸ºåœ¨ç§»åŠ¨è®¾å¤‡å’ŒåµŒå…¥å¼è®¾å¤‡ï¼ˆæ¯”å¦‚æ‰‹æœºã€PDAã€ç”µè§†æœºé¡¶ç›’å’Œæ‰“å°æœºï¼‰ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºæä¾›ä¸€ä¸ªå¥å£®ä¸”çµæ´»çš„ç¯å¢ƒã€‚Java MEåŒ…æ‹¬çµæ´»	  çš„ç”¨æˆ·ç•Œé¢ã€å¥å£®çš„å®‰å…¨æ¨¡å¼ã€è®¸å¤šå†…ç½®çš„ç½‘ç»œåè®®ä»¥åŠå¯¹äºåŠ¨æ€ä¸‹è½½çš„è¿ç½‘å’Œç¦»çº¿åº”ç”¨ç¨‹åºçš„ä¸°å¯Œæ”¯æŒã€‚åŸºäºJava MEè§„èŒƒçš„åº”ç”¨ç¨‹åºåªéœ€è¦ç¼–å†™     	  ä¸€æ¬¡ï¼Œå°±å¯ä»¥ç”¨äºè®¸å¤šè®¾å¤‡ï¼Œè€Œä¸”å¯ä»¥åˆ©ç”¨æ¯ä¸ªè®¾å¤‡çš„æœ¬çº§åŠŸèƒ½ã€‚

å†æ€»ç»“ä¸€ä¸‹ï¼ŒJavaSEæ˜¯Javaçš„åŸºç¡€ï¼Œä¸»è¦é’ˆå¯¹æ¡Œé¢ç¨‹åºå¼€å‘ï¼›JavaEEæ˜¯é’ˆå¯¹ä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼›è€ŒJavaMEæ˜¯ä¸»è¦é’ˆå¯¹åµŒå…¥å¼è®¾å¤‡è½¯ä»¶å¼€å‘

### Javaè¯­è¨€çš„ç‰¹ç‚¹

â€‹		**ç‰¹ç‚¹ä¸€ï¼šé¢å‘å¯¹è±¡**

â€‹				`ä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µ`ï¼šç±»ã€å¯¹è±¡

â€‹				`ä¸‰å¤§ç‰¹æ€§`ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€

â€‹		**ç‰¹ç‚¹äºŒï¼šå¥å£®æ€§**

â€‹				å¸æ”¶äº†C/C++è¯­è¨€çš„ä¼˜ç‚¹ï¼Œä½†å»æ‰äº†å…¶å½±å“ç¨‹åºå¥å£®æ€§çš„éƒ¨åˆ†ï¼ˆå¦‚æŒ‡é’ˆã€å†…å­˜çš„ç”³è¯·ä¸é‡Šæ”¾ç­‰ï¼‰ï¼Œæä¾›äº†ä¸€ä¸ªç›¸å¯¹å®‰å…¨çš„å†…å­˜ç®¡ç†

â€‹				å’Œè®¿é—®æœºåˆ¶

â€‹		**ç‰¹ç‚¹ä¸‰ï¼šè·¨å¹³å°æ€§**

â€‹				`è·¨å¹³å°æ€§`ï¼šé€šè¿‡Javaè¯­è¨€ç¼–å†™çš„åº”ç”¨ç¨‹åºåœ¨ä¸åŒçš„ç³»ç»Ÿå¹³å°ä¸Šéƒ½å¯ä»¥è¿è¡Œã€‚â€œWrite once , Run Anywhere"

â€‹				åŸç†ï¼šåªè¦åœ¨éœ€è¦è¿è¡Œjavaåº”ç”¨ç¨‹åºçš„æ“ä½œç³»ç»Ÿä¸Šï¼Œå…ˆå®‰è£…ä¸€ä¸ªJavaè™šæ‹Ÿæœºï¼ˆJVM Java Virtual Machine)å³å¯ã€‚ç”±JVM

â€‹						  æ¥è´Ÿè´£Javaç¨‹åºåœ¨è¯¥ç³»ç»Ÿä¸­çš„è¿è¡Œã€‚

### Javaç»„æˆ

â—Javaç¼–ç¨‹è¯­è¨€ï¼Œå³è¯­æ³•ã€‚

â—Javaæ–‡ä»¶æ ¼å¼ï¼Œå³å„ç§æ–‡ä»¶å¤¹ã€æ–‡ä»¶çš„åç¼€ã€‚

â—Javaè™šæ‹Ÿæœº(JVMâ€”â€”Java Virtal Machine)ï¼Œå³å¤„ç†*.classæ–‡ä»¶çš„è§£é‡Šå™¨ã€‚

â€‹		<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220832.png" alt="image-20201229222307781" style="zoom:80%;" />

â—Javaåº”ç”¨ç¨‹åºæ¥å£(Java API)ã€‚

## å¸¸ç”¨çš„DOSå‘½ä»¤

1ã€dir: åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹

2ã€md: åˆ›å»ºç›®å½•

3ã€rd: åˆ é™¤ç›®å½•

4ã€cd: è¿›å…¥æŒ‡å®šç›®å½•

5ã€cd ..ï¼šé€€å›åˆ°ä¸Šä¸€çº§ç›®å½•

6ã€cd \ï¼šé€€å›åˆ°æ ¹ç›®å½•

7ã€delï¼šåˆ é™¤æ–‡ä»¶

8ã€exitï¼šé€€å‡ºdoså‘½ä»¤è¡Œ

9ã€clsï¼šæ¸…ç©ºdosé¡µé¢å†…å®¹

10ã€åˆ‡æ¢ç›˜ç¬¦è¾“å…¥ç›˜ç¬¦ååŠ ï¼šå°±è¡Œï¼Œä¾‹ï¼š

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220837.png" alt="image-20201229212811291" style="zoom: 80%;" />

`æ³¨ï¼šwindowsä¸åŒºåˆ†å¤§å°å†™`

## ç¯å¢ƒæ­å»º

<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220840.png" alt="image-20201229222809508" style="zoom:80%;" />

![image-20201229222838773](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220843.png)

### å®‰è£…JDK

1ã€åŒå‡»å®‰è£…åŒ…

â€‹	![image-20201229223143747](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210505221934.png) 

2ã€ç›´æ¥å…¨æŒ‰ä¸‹ä¸€æ­¥ï¼Œä¹Ÿå¯ä»¥æ›´æ¢å®‰è£…è·¯å¾„

â€‹	<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210505221926.png" alt="image-20201229223340203" style="zoom:80%;" />

3ã€è¿™æ—¶å€™å¯èƒ½ä¼šå¼¹å‡ºä¸€ä¸ªjreå®‰è£…å¼¹çª—ï¼Œå¯ä»¥ç›´æ¥å…³æ‰ï¼Œå»ºè®®å®‰è£…ï¼Œä¹Ÿæ˜¯ç›´æ¥å…¨éƒ¨ä¸‹ä¸€æ­¥å°±è¡Œäº†

â€‹	<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220849.png" alt="image-20201229223536841" style="zoom:80%;" />

4ã€å®‰è£…å®Œæˆ

â€‹	<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220852.png" alt="image-20201229223612020" style="zoom:80%;" />

5ã€æ‰“å¼€å®‰è£…ç›®å½•

â€‹    <img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220855.png" alt="image-20201229224055374" style="zoom:80%;" />

**æˆ‘ä»¬è¿è¡Œjavaç¨‹åºçš„æµç¨‹æ˜¯ï¼š**

åˆ›å»ºä¸€ä¸ª.javaåç¼€æ–‡ä»¶

![image-20201229224350615](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220859.png)

ç¼–å†™ä»£ç å¹¶ä¿å­˜ï¼š

```
     class HelloWorld{
           public static void main(String[] args){
               System.out.printf("Hello World");
           }
     }
```

åˆ©ç”¨`javac.exe`ç¨‹åºæŠŠ.javaæ–‡ä»¶ç¼–è¯‘æˆ.classæ–‡ä»¶

![image-20201229224620808](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220901.png)

è¿™æ—¶å€™åœ¨.javaæ–‡ä»¶ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ª.classæ–‡ä»¶äº†

æˆ‘ä»¬å†ç”¨`java.exe`ç¨‹åºè¿è¡Œ.classæ–‡ä»¶

![image-20201229224800391](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220904.png)

ä½†æ˜¯ä¸Šé¢ä½¿ç”¨`javac.exe`å’Œ`java.exe`æ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼Œæˆ‘ä»¬`éœ€è¦é…ç½®ç¯å¢ƒå˜é‡`

### ç¯å¢ƒå˜é‡çš„é…ç½®

æœ€ç®€å•é…ç½®æ–¹å¼ï¼š

â€‹	<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220908.png" alt="image-20201229225221362" style="zoom:67%;" />

æŠŠjavaJDKçš„æ–‡ä»¶ç›®å½•ä¸‹çš„binç›®å½•è·¯å¾„å¤åˆ¶åˆ°Pathç¯å¢ƒå˜é‡ä¸‹å°±è¡Œäº†

ç¬¬äºŒä¸­é…ç½®æ–¹å¼ï¼ˆæ¨èï¼‰ï¼š

â€‹		ç¬¬ä¸€æ­¥ï¼šå…ˆå»ºç«‹ä¸€ä¸ªå˜é‡

â€‹					<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220911.png" alt="image-20201229225415655" style="zoom:67%;" />

â€‹		ç¬¬äºŒéƒ¨ï¼šåœ¨Pathå˜é‡å¼•ç”¨ä¸Šé¢çš„å˜é‡

â€‹					<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220914.png" alt="image-20201229225455326" style="zoom:67%;" />

â€‹		æœ€åï¼Œæµ‹è¯•ï¼š

â€‹					<img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220917.png" alt="image-20201229225538874" style="zoom:80%;" />

â€‹		å®Œç¾æˆåŠŸ

## åŸºæœ¬ä½¿ç”¨

1. **javaç¨‹åºç¼–å†™-ç¼–è¯‘-è¿è¡Œçš„è¿‡ç¨‹**

  <img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220920.png" alt="image-20201229233248830" style="zoom:67%;" />

  ç¼–å†™ï¼šæˆ‘ä»¬å°†ç¼–å†™çš„javaä»£ç ä¿å­˜åœ¨ä»¥".java"ç»“å°¾çš„æºæ–‡ä»¶ä¸­

  ```
   class HelloWorld{
             public static void main(String[] args){
                 System.out.printf("Hello World");
             }
       }
  ```

  ç¼–è¯‘ï¼šä½¿ç”¨javac.exeå‘½ä»¤ç¼–è¯‘æˆ‘ä»¬çš„javaæºæ–‡ä»¶ã€‚æ ¼å¼ï¼šjavac æºæ–‡ä»¶å.java

  ![image-20201229224620808](https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220924.png)

  è¿è¡Œï¼šä½¿ç”¨java.exeå‘½ä»¤è§£é‡Šè¿è¡Œæˆ‘ä»¬çš„å­—èŠ‚ç æ–‡ä»¶ã€‚ æ ¼å¼ï¼šjava ç±»å

  <img src="https://gitee.com/gitopenchina/typora-image/raw/master/img/20210227220927.png" alt="image-20201229233248830" style="zoom:80%;" />

2. **åœ¨ä¸€ä¸ªjavaæºæ–‡ä»¶ä¸­å¯ä»¥å£°æ˜å¤šä¸ªclassã€‚ä½†æ˜¯ï¼Œåªèƒ½æœ€å¤šæœ‰ä¸€ä¸ªç±»å£°æ˜ä¸ºpublicçš„ã€‚**
   **è€Œä¸”è¦æ±‚å£°æ˜ä¸ºpublicçš„ç±»çš„ç±»åå¿…é¡»ä¸æºæ–‡ä»¶åç›¸åŒ.**

3. **ç¨‹åºçš„å…¥å£æ˜¯main()æ–¹æ³•ã€‚æ ¼å¼æ˜¯å›ºå®šçš„**ã€‚
4. **è¾“å‡ºè¯­å¥ï¼š**
System.out.println():å…ˆè¾“å‡ºæ•°æ®ï¼Œç„¶åæ¢è¡Œ
System.out.print():åªè¾“å‡ºæ•°æ®
5. **æ¯ä¸€è¡Œæ‰§è¡Œè¯­å¥éƒ½ä»¥";"ç»“æŸã€‚**
6. **ç¼–è¯‘çš„è¿‡ç¨‹ï¼šç¼–è¯‘ä»¥åï¼Œä¼šç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ç æ–‡ä»¶ã€‚å­—èŠ‚ç æ–‡ä»¶çš„æ–‡ä»¶åä¸javaæºæ–‡ä»¶ä¸­çš„ç±»åç›¸åŒã€‚**

## åŸºæœ¬è¯­æ³•

### æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦

#### å…³é”®å­—

> å®šä¹‰ï¼šè¢«Javaè¯­è¨€èµ‹äºˆäº†ç‰¹æ®Šå«ä¹‰ï¼Œç”¨åšä¸“é—¨ç”¨é€”çš„å­—ç¬¦ä¸²ï¼ˆå•è¯ï¼‰
>
> ç‰¹ç‚¹ï¼šå…³é”®å­—ä¸­æ‰€æœ‰å­—æ¯éƒ½ä½=ä¸ºå°å†™

